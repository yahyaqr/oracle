
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="My personal digital garden">
      
      
        <meta name="author" content="Yahyaqr">
      
      
        <link rel="canonical" href="https://yahyaqr.github.io/oracle/Code/How_to_Flask/Tutorial/">
      
      
        <link rel="prev" href="../Quickstart/">
      
      
        <link rel="next" href="../../How_to_Git_Branch/1_Branches_in_a_Nutshell/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.24">
    
    
      
        <title>Tutorial - Yahya's Oracle</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#project-layout" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Yahya&#39;s Oracle" class="md-header__button md-logo" aria-label="Yahya's Oracle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Yahya's Oracle
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Me

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Book/Ego_is_The_Enemy/" class="md-tabs__link">
          
  
  Book

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../Basic%20Cheatsheet/" class="md-tabs__link">
          
  
  Code

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Question/Behavioral/Danger_Sign/" class="md-tabs__link">
          
  
  Question

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../Think/How_to_be_valuable/How_to_be_valuable/" class="md-tabs__link">
          
  
  Think

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%F0%9F%9B%A0/How-to/" class="md-tabs__link">
          
  
  ðŸ› 

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Yahya&#39;s Oracle" class="md-nav__button md-logo" aria-label="Yahya's Oracle" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Yahya's Oracle
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Me
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Book
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Book
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Book/Ego_is_The_Enemy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ego is The Enemy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Book/The_Compound_Effect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Compound Effect
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Code
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic%20Cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Cheatsheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Git Workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_React/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to React
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_React_Native/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to React Native
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_React_TypeScript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to React TypeScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_TypeScript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to TypeScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" checked>
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to Flask
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            How to Flask
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Project Layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Application Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Application Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-application-factory" class="md-nav__link">
    <span class="md-ellipsis">
      The Application Factory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      Run The Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define-and-access-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Define and Access the Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Define and Access the Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connect-to-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Connect to the Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-with-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      Register with the Application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-the-database-file" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize the Database File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blueprints-and-views" class="md-nav__link">
    <span class="md-ellipsis">
      Blueprints and Views
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blueprints and Views">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Blueprint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-first-view-register" class="md-nav__link">
    <span class="md-ellipsis">
      The First View: Register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login" class="md-nav__link">
    <span class="md-ellipsis">
      Login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logout" class="md-nav__link">
    <span class="md-ellipsis">
      Logout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#require-authentication-in-other-views" class="md-nav__link">
    <span class="md-ellipsis">
      Require Authentication in Other Views
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#endpoints-and-urls" class="md-nav__link">
    <span class="md-ellipsis">
      Endpoints and URLs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template" class="md-nav__link">
    <span class="md-ellipsis">
      Template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-base-layout" class="md-nav__link">
    <span class="md-ellipsis">
      The Base Layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register" class="md-nav__link">
    <span class="md-ellipsis">
      Register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-in" class="md-nav__link">
    <span class="md-ellipsis">
      Log In
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-a-user" class="md-nav__link">
    <span class="md-ellipsis">
      Register A User
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files" class="md-nav__link">
    <span class="md-ellipsis">
      Static Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blog-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      Blog Blueprint
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blog Blueprint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      The Blueprint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      Index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    <span class="md-ellipsis">
      Create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    <span class="md-ellipsis">
      Update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    <span class="md-ellipsis">
      Delete
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#make-the-project-installable" class="md-nav__link">
    <span class="md-ellipsis">
      Make the Project Installable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Make the Project Installable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#describe-the-project" class="md-nav__link">
    <span class="md-ellipsis">
      Describe the Project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-the-project" class="md-nav__link">
    <span class="md-ellipsis">
      Install the Project
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      Test Coverage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test Coverage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-and-fixtures" class="md-nav__link">
    <span class="md-ellipsis">
      Setup and Fixtures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#factory" class="md-nav__link">
    <span class="md-ellipsis">
      Factory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blog" class="md-nav__link">
    <span class="md-ellipsis">
      Blog
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Tests
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-to-production" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy to Production
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploy to Production">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-and-install" class="md-nav__link">
    <span class="md-ellipsis">
      Build and Install
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-secret-key" class="md-nav__link">
    <span class="md-ellipsis">
      Configure the Secret Key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-with-a-production-server" class="md-nav__link">
    <span class="md-ellipsis">
      Run with a Production Server
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keep-developing" class="md-nav__link">
    <span class="md-ellipsis">
      Keep Developing!
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to Git Branch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            How to Git Branch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/1_Branches_in_a_Nutshell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Branches in a Nutshell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/2_Basic_Branching_and_Merging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Basic Branching and Merging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/3_Branch%20Management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Branch Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/4_Branching_Workflows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Branching Workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/5_Remote_Branches/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Remote Branches
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/6_Rebasing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Rebasing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/7_Distributed_Workflows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Distributed Workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/8_Stashing_and_Cleaning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 Stashing and Cleaning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/Cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheatsheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Git_Branch/Cheatsheet_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheatsheet 2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_11" >
        
          
          <label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to GraphQL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_11">
            <span class="md-nav__icon md-icon"></span>
            How to GraphQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/1_GraphQL_vs_REST/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 GraphQL vs REST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/2_Core_Concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Core Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/3_More_GraphQL_Concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 More GraphQL Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/4_Tooling_and_Ecosystem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Tooling and Ecosystem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_11_5" >
        
          
          <label class="md-nav__link" for="__nav_3_11_5" id="__nav_3_11_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_11_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_11_5">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/Tutorial/Part_0_Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 0 Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/Tutorial/Part_1_Frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 1 Frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/Tutorial/Part_2_API_Prep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 2 API Prep
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/Tutorial/Part_3_GraphQL_API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 3 GraphQL API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_GraphQL/Tutorial/Part_4_Codegen_and_Deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 4 Codegen and Deployment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to Next.js
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            How to Next.js
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/How_to_Next.js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to Next.js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12_2" >
        
          
          <label class="md-nav__link" for="__nav_3_12_2" id="__nav_3_12_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cheatsheet
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_2">
            <span class="md-nav__icon md-icon"></span>
            Cheatsheet
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Cheatsheet/1_Setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Cheatsheet/2_Deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Cheatsheet/3_Add_TypeScript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Add TypeScript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Cheatsheet/4_Add_ESLint_and_Prettier/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Add ESLint and Prettier
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Cheatsheet/5_Add_Styling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Add Styling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Cheatsheet/6_Add_SEO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Add SEO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Cheatsheet/7_Add_Analytics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Add Analytics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Cheatsheet/8_Miscellanous_Tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 Miscellanous Tips
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_12_3" >
        
          
          <label class="md-nav__link" for="__nav_3_12_3" id="__nav_3_12_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_3">
            <span class="md-nav__icon md-icon"></span>
            Docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/1_Installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/2.1_Project_Organization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1 Project Organization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/2_Project_Structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Project Structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/3.1_Route_Handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1 Route Handlers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/3.2_Routing_Misc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2 Routing Misc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/3_Pages_and_Routing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Pages and Routing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/4_Components_and_Layouts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Components and Layouts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/5_Data_Fetching/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Data Fetching
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/7_Internationalization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Internationalization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_Next.js/Docs/8_Middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 Middleware
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_13" >
        
          
          <label class="md-nav__link" for="__nav_3_13" id="__nav_3_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to PR Review
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_13">
            <span class="md-nav__icon md-icon"></span>
            How to PR Review
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_PR_Review/0_Useful_Tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0 Useful Tips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_PR_Review/1_Code_Review_Approaches/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Code Review Approaches
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_PR_Review/2_During_Coding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 During Coding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_PR_Review/3_Before_Asking_PR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Before Asking PR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_PR_Review/4_Addressing_Review/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Addressing Review
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_PR_Review/5_How_To_PR_Review_on_GitHub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 How To PR Review on GitHub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../How_to_PR_Review/6_How_To_PR_Review_on_VSCode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 How To PR Review on VSCode
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Question
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Question
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Behavioral
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Behavioral
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Behavioral/Danger_Sign/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What are your own danger signs during a disagreement?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Behavioral/Lose_Temper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    When do you most easily lose your temper in conversations or situations?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Behavioral/Rude/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How do you normally respond when other people are rude or mean to you?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Behavioral/Share%20one%20way%20you%20would%20like%20to%20do%20a%20better%20job%20of%20managing%20difficult%20emotions%20or%20insecurities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Share one way you would like to do a better job of managing difficult emotions or insecurities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Behavioral/What%20parts%20of%20your%20personality%20or%20behavior%20cause%20friction%20in%20your%20relationship/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What parts of your personality or behavior cause friction in your relationship
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Behavioral/What%27s%20something%20you%27ve%20been%20meaning%20to%20try%20to%20but%20just%20haven%27t%20gotten%20around%20to%20yet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's something you've been meaning to try to but just haven't gotten around to yet
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Learning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/Do%20you%20have%20any%20fears%20that%20you%20would%20consider%20irrational/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Do you have any fears that you would consider irrational
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/Do%20you%20prefer%20to%20plan%20things%20out%20or%20let%20things%20happen%20as%20they%20happen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Do you prefer to plan things out or let things happen as they happen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/Does%20making%20friends%20with%20strangers%20come%20naturally%20to%20you/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Does making friends with strangers come naturally to you
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/Have%20you%20ever%20won%20or%20been%20chosen%20for%20something%20despite%20thinking%20you%20had%20no%20chance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Have you ever won or been chosen for something despite thinking you had no chance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/Share%20a%20memory%20that%20many%20people%20don%27t%20know%20about%20that%20always%20bring%20you%20joy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Share a memory that many people don't know about that always bring you joy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/Share%20a%20way%20that%20you%27ve%20grown%20recently/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Share a way that you've grown recently
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/What%20do%20you%20do%20when%20you%20need%20to%20feel%20motivated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What do you do when you need to feel motivated
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/What%27s%20something%20that%20people%20are%20usually%20surprised%20to%20learn%20about%20you/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's something that people are usually surprised to learn about you
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/What%27s%20something%20you%20understand%20today%20that%20you%20wouldn%27t%20have%20understood%20a%20year%20ago/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's something you understand today that you wouldn't have understood a year ago
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/What%27s%20something%20you%20used%20to%20do%20a%20lot%20but%20don%27t%20any%20more/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's something you used to do a lot but don't any more
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Question/Learning/What%27s%20something%20you%27d%20love%20to%20receive%20as%20a%20gift%20but%20no%20one%20ever%20thinks%20of/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's something you'd love to receive as a gift but no one ever thinks of
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Think
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Think
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to be valuable
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            How to be valuable
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Think/How_to_be_valuable/How_to_be_valuable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to be valuable
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to read
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            How to read
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Think/How_to_read/Flowchart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flowchart
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to write
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            How to write
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Think/How_to_write/Flowchart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flowchart
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ðŸ› 
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            ðŸ› 
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%F0%9F%9B%A0/How-to/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%F0%9F%9B%A0/Todo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Todo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%F0%9F%9B%A0/Type%20of%20Data%20Visualizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type of Data Visualizations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%F0%9F%9B%A0/Type%20of%20Tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Type of Tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#project-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Project Layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Application Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Application Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-application-factory" class="md-nav__link">
    <span class="md-ellipsis">
      The Application Factory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      Run The Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#define-and-access-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Define and Access the Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Define and Access the Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connect-to-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Connect to the Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-with-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      Register with the Application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-the-database-file" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize the Database File
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blueprints-and-views" class="md-nav__link">
    <span class="md-ellipsis">
      Blueprints and Views
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blueprints and Views">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      Create a Blueprint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-first-view-register" class="md-nav__link">
    <span class="md-ellipsis">
      The First View: Register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#login" class="md-nav__link">
    <span class="md-ellipsis">
      Login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logout" class="md-nav__link">
    <span class="md-ellipsis">
      Logout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#require-authentication-in-other-views" class="md-nav__link">
    <span class="md-ellipsis">
      Require Authentication in Other Views
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#endpoints-and-urls" class="md-nav__link">
    <span class="md-ellipsis">
      Endpoints and URLs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template" class="md-nav__link">
    <span class="md-ellipsis">
      Template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-base-layout" class="md-nav__link">
    <span class="md-ellipsis">
      The Base Layout
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register" class="md-nav__link">
    <span class="md-ellipsis">
      Register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-in" class="md-nav__link">
    <span class="md-ellipsis">
      Log In
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-a-user" class="md-nav__link">
    <span class="md-ellipsis">
      Register A User
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files" class="md-nav__link">
    <span class="md-ellipsis">
      Static Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blog-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      Blog Blueprint
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blog Blueprint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-blueprint" class="md-nav__link">
    <span class="md-ellipsis">
      The Blueprint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      Index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    <span class="md-ellipsis">
      Create
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    <span class="md-ellipsis">
      Update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    <span class="md-ellipsis">
      Delete
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#make-the-project-installable" class="md-nav__link">
    <span class="md-ellipsis">
      Make the Project Installable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Make the Project Installable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#describe-the-project" class="md-nav__link">
    <span class="md-ellipsis">
      Describe the Project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-the-project" class="md-nav__link">
    <span class="md-ellipsis">
      Install the Project
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      Test Coverage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test Coverage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-and-fixtures" class="md-nav__link">
    <span class="md-ellipsis">
      Setup and Fixtures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#factory" class="md-nav__link">
    <span class="md-ellipsis">
      Factory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blog" class="md-nav__link">
    <span class="md-ellipsis">
      Blog
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Tests
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-to-production" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy to Production
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploy to Production">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build-and-install" class="md-nav__link">
    <span class="md-ellipsis">
      Build and Install
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-the-secret-key" class="md-nav__link">
    <span class="md-ellipsis">
      Configure the Secret Key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-with-a-production-server" class="md-nav__link">
    <span class="md-ellipsis">
      Run with a Production Server
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keep-developing" class="md-nav__link">
    <span class="md-ellipsis">
      Keep Developing!
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Tutorial</h1>

<h2 id="project-layout">Project Layout<a class="headerlink" href="#project-layout" title="Permanent link">&para;</a></h2>
<p>Create a project directory and enter it:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mkdir<span class="w"> </span>flask-tutorial
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>flask-tutorial
</code></pre></div>
<p>Then follow theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/installation/">installation instructions</a>Â to set up a Python virtual environment and install Flask for your project.</p>
<p>The tutorial will assume youâ€™re working from theÂ <code>flask-tutorial</code>Â directory from now on. The file names at the top of each code block are relative to this directory.</p>
<p>A Flask application can be as simple as a single file.</p>
<p><code>hello.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;Hello, World!&#39;</span>
</code></pre></div>
<p>However, as a project gets bigger, it becomes overwhelming to keep all the code in one file. Python projects useÂ <em>packages</em>Â to organize code into multiple modules that can be imported where needed, and the tutorial will do this as well.</p>
<p>The project directory will contain:</p>
<ul>
<li><code>flaskr/</code>, a Python package containing your application code and files.</li>
<li><code>tests/</code>, a directory containing test modules.</li>
<li><code>.venv/</code>, a Python virtual environment where Flask and other dependencies are installed.</li>
<li>Installation files telling Python how to install your project.</li>
<li>Version control config, such asÂ <a href="https://git-scm.com/">git</a>. You should make a habit of using some type of version control for all your projects, no matter the size.</li>
<li>Any other project files you might add in the future.</li>
</ul>
<p>By the end, your project layout will look like this:</p>
<div class="highlight"><pre><span></span><code>/home/user/Projects/flask-tutorial
â”œâ”€â”€ flaskr/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ db.py
â”‚   â”œâ”€â”€ schema.sql
â”‚   â”œâ”€â”€ auth.py
â”‚   â”œâ”€â”€ blog.py
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ base.html
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ login.html
â”‚   â”‚   â”‚   â””â”€â”€ register.html
â”‚   â”‚   â””â”€â”€ blog/
â”‚   â”‚       â”œâ”€â”€ create.html
â”‚   â”‚       â”œâ”€â”€ index.html
â”‚   â”‚       â””â”€â”€ update.html
â”‚   â””â”€â”€ static/
â”‚       â””â”€â”€ style.css
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ conftest.py
â”‚   â”œâ”€â”€ data.sql
â”‚   â”œâ”€â”€ test_factory.py
â”‚   â”œâ”€â”€ test_db.py
â”‚   â”œâ”€â”€ test_auth.py
â”‚   â””â”€â”€ test_blog.py
â”œâ”€â”€ .venv/
â”œâ”€â”€ pyproject.toml
â””â”€â”€ MANIFEST.in
</code></pre></div>
<p>If youâ€™re using version control, the following files that are generated while running your project should be ignored. There may be other files based on the editor you use. In general, ignore files that you didnâ€™t write. For example, with git:</p>
<p><code>.gitignore</code></p>
<div class="highlight"><pre><span></span><code>.venv/

*.pyc
__pycache__/

instance/

.pytest_cache/
.coverage
htmlcov/

dist/
build/
*.egg-info/
</code></pre></div>
<h2 id="application-setup">Application Setup<a class="headerlink" href="#application-setup" title="Permanent link">&para;</a></h2>
<p>A Flask application is an instance of theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask" title="flask.Flask"><code>Flask</code></a>Â class. Everything about the application, such as configuration and URLs, will be registered with this class.</p>
<p>The most straightforward way to create a Flask application is to create a globalÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask" title="flask.Flask"><code>Flask</code></a>Â instance directly at the top of your code, like how the â€œHello, World!â€ example did on the previous page. While this is simple and useful in some cases, it can cause some tricky issues as the project grows.</p>
<p>Instead of creating aÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask" title="flask.Flask"><code>Flask</code></a>Â instance globally, you will create it inside a function. This function is known as theÂ <em>application factory</em>. Any configuration, registration, and other setup the application needs will happen inside the function, then the application will be returned.</p>
<h3 id="the-application-factory">The Application Factory<a class="headerlink" href="#the-application-factory" title="Permanent link">&para;</a></h3>
<p>Itâ€™s time to start coding! Create theÂ <code>flaskr</code>Â directory and add theÂ <code>__init__.py</code>Â file. TheÂ <code>__init__.py</code>Â serves double duty: it will contain the application factory, and it tells Python that theÂ <code>flaskr</code>Â directory should be treated as a package.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>mkdir<span class="w"> </span>flaskr
</code></pre></div>
<p><code>flaskr/__init__.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="k">def</span> <span class="nf">create_app</span><span class="p">(</span><span class="n">test_config</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="c1"># create and configure the app</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">instance_relative_config</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_mapping</span><span class="p">(</span>
        <span class="n">SECRET_KEY</span><span class="o">=</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span>
        <span class="n">DATABASE</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">instance_path</span><span class="p">,</span> <span class="s1">&#39;flaskr.sqlite&#39;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">test_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># load the instance config, if it exists, when not testing</span>
        <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_pyfile</span><span class="p">(</span><span class="s1">&#39;config.py&#39;</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># load the test config if passed in</span>
        <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_mapping</span><span class="p">(</span><span class="n">test_config</span><span class="p">)</span>

    <span class="c1"># ensure the instance folder exists</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">instance_path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># a simple page that says hello</span>
    <span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/hello&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
        <span class="k">return</span> <span class="s1">&#39;Hello, World!&#39;</span>

    <span class="k">return</span> <span class="n">app</span>
</code></pre></div>
<p><code>create_app</code>Â is the application factory function. Youâ€™ll add to it later in the tutorial, but it already does a lot.</p>
<ol>
<li>
<p><code>appÂ =Â Flask(__name__,Â instance_relative_config=True)</code>Â creates theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask" title="flask.Flask"><code>Flask</code></a>Â instance.</p>
<ul>
<li><code>__name__</code>Â is the name of the current Python module. The app needs to know where itâ€™s located to set up some paths, andÂ <code>__name__</code>Â is a convenient way to tell it that.</li>
<li><code>instance_relative_config=True</code>Â tells the app that configuration files are relative to theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/config/#instance-folders">instance folder</a>. The instance folder is located outside theÂ <code>flaskr</code>Â package and can hold local data that shouldnâ€™t be committed to version control, such as configuration secrets and the database file.</li>
</ul>
</li>
<li>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Config.from_mapping" title="flask.Config.from_mapping"><code>app.config.from_mapping()</code></a>Â sets some default configuration that the app will use:</p>
<ul>
<li><a href="https://flask.palletsprojects.com/en/3.0.x/config/#SECRET_KEY" title="SECRET_KEY"><code>SECRET_KEY</code></a>Â is used by Flask and extensions to keep data safe. Itâ€™s set toÂ <code>'dev'</code>Â to provide a convenient value during development, but it should be overridden with a random value when deploying.</li>
<li><code>DATABASE</code>Â is the path where the SQLite database file will be saved. Itâ€™s underÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.instance_path" title="flask.Flask.instance_path"><code>app.instance_path</code></a>, which is the path that Flask has chosen for the instance folder. Youâ€™ll learn more about the database in the next section.</li>
</ul>
</li>
<li>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Config.from_pyfile" title="flask.Config.from_pyfile"><code>app.config.from_pyfile()</code></a>Â overrides the default configuration with values taken from theÂ <code>config.py</code>Â file in the instance folder if it exists. For example, when deploying, this can be used to set a realÂ <code>SECRET_KEY</code>.</p>
<ul>
<li><code>test_config</code>Â can also be passed to the factory, and will be used instead of the instance configuration. This is so the tests youâ€™ll write later in the tutorial can be configured independently of any development values you have configured.</li>
</ul>
</li>
<li>
<p><a href="https://docs.python.org/3/library/os.html#os.makedirs" title="(in Python v3.12)"><code>os.makedirs()</code></a>Â ensures thatÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.instance_path" title="flask.Flask.instance_path"><code>app.instance_path</code></a>Â exists. Flask doesnâ€™t create the instance folder automatically, but it needs to be created because your project will create the SQLite database file there.</p>
</li>
<li>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.route" title="flask.Flask.route"><code>@app.route()</code></a>Â creates a simple route so you can see the application working before getting into the rest of the tutorial. It creates a connection between the URLÂ <code>/hello</code>Â and a function that returns a response, the stringÂ <code>'Hello,Â World!'</code>Â in this case.</p>
</li>
</ol>
<h3 id="run-the-application">Run The Application<a class="headerlink" href="#run-the-application" title="Permanent link">&para;</a></h3>
<p>Now you can run your application using theÂ <code>flask</code>Â command. From the terminal, tell Flask where to find your application, then run it in debug mode. Remember, you should still be in the top-levelÂ <code>flask-tutorial</code>Â directory, not theÂ <code>flaskr</code>Â package.</p>
<p>Debug mode shows an interactive debugger whenever a page raises an exception, and restarts the server whenever you make changes to the code. You can leave it running and just reload the browser page as you follow the tutorial.</p>
<p>$ flask --app flaskr run --debug</p>
<p>Youâ€™ll see output similar to this:</p>
<ul>
<li>Serving Flask app "flaskr"</li>
<li>Debug mode: on</li>
<li>Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)</li>
<li>Restarting with stat</li>
<li>Debugger is active!</li>
<li>Debugger PIN: nnn-nnn-nnn</li>
</ul>
<p>VisitÂ <a href="http://127.0.0.1:5000/hello">http://127.0.0.1:5000/hello</a>Â in a browser and you should see the â€œHello, World!â€ message. Congratulations, youâ€™re now running your Flask web application!</p>
<p>If another program is already using port 5000, youâ€™ll seeÂ <code>OSError:Â [ErrnoÂ 98]</code>Â orÂ <code>OSError:Â [WinErrorÂ 10013]</code>Â when the server tries to start. SeeÂ <a href="https://flask.palletsprojects.com/en/3.0.x/server/#address-already-in-use">Address already in use</a>Â for how to handle that.</p>
<h2 id="define-and-access-the-database">Define and Access the Database<a class="headerlink" href="#define-and-access-the-database" title="Permanent link">&para;</a></h2>
<p>The application will use aÂ <a href="https://sqlite.org/about.html">SQLite</a>Â database to store users and posts. Python comes with built-in support for SQLite in theÂ <a href="https://docs.python.org/3/library/sqlite3.html#module-sqlite3" title="(in Python v3.12)"><code>sqlite3</code></a>Â module.</p>
<p>SQLite is convenient because it doesnâ€™t require setting up a separate database server and is built-in to Python. However, if concurrent requests try to write to the database at the same time, they will slow down as each write happens sequentially. Small applications wonâ€™t notice this. Once you become big, you may want to switch to a different database.</p>
<p>The tutorial doesnâ€™t go into detail about SQL. If you are not familiar with it, the SQLite docs describe theÂ <a href="https://sqlite.org/lang.html">language</a>.</p>
<h3 id="connect-to-the-database">Connect to the Database<a class="headerlink" href="#connect-to-the-database" title="Permanent link">&para;</a></h3>
<p>The first thing to do when working with a SQLite database (and most other Python database libraries) is to create a connection to it. Any queries and operations are performed using the connection, which is closed after the work is finished.</p>
<p>In web applications this connection is typically tied to the request. It is created at some point when handling a request, and closed before the response is sent.</p>
<p><code>flaskr/db.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="kn">import</span> <span class="nn">click</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">current_app</span><span class="p">,</span> <span class="n">g</span>

<span class="k">def</span> <span class="nf">get_db</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;db&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
        <span class="n">g</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">current_app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;DATABASE&#39;</span><span class="p">],</span>
            <span class="n">detect_types</span><span class="o">=</span><span class="n">sqlite3</span><span class="o">.</span><span class="n">PARSE_DECLTYPES</span>
        <span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">row_factory</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Row</span>

    <span class="k">return</span> <span class="n">g</span><span class="o">.</span><span class="n">db</span>

<span class="k">def</span> <span class="nf">close_db</span><span class="p">(</span><span class="n">e</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;db&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">db</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.g" title="flask.g"><code>g</code></a>Â is a special object that is unique for each request. It is used to store data that might be accessed by multiple functions during the request. The connection is stored and reused instead of creating a new connection ifÂ <code>get_db</code>Â is called a second time in the same request.</p>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.current_app" title="flask.current_app"><code>current_app</code></a>Â is another special object that points to the Flask application handling the request. Since you used an application factory, there is no application object when writing the rest of your code.Â <code>get_db</code>Â will be called when the application has been created and is handling a request, soÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.current_app" title="flask.current_app"><code>current_app</code></a>Â can be used.</p>
<p><a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.connect" title="(in Python v3.12)"><code>sqlite3.connect()</code></a>Â establishes a connection to the file pointed at by theÂ <code>DATABASE</code>Â configuration key. This file doesnâ€™t have to exist yet, and wonâ€™t until you initialize the database later.</p>
<p><a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Row" title="(in Python v3.12)"><code>sqlite3.Row</code></a>Â tells the connection to return rows that behave like dicts. This allows accessing the columns by name.</p>
<p><code>close_db</code>Â checks if a connection was created by checking ifÂ <code>g.db</code>Â was set. If the connection exists, it is closed. Further down you will tell your application about theÂ <code>close_db</code>Â function in the application factory so that it is called after each request.</p>
<h3 id="create-the-tables">Create the Tables<a class="headerlink" href="#create-the-tables" title="Permanent link">&para;</a></h3>
<p>In SQLite, data is stored inÂ <em>tables</em>Â andÂ <em>columns</em>. These need to be created before you can store and retrieve data. Flaskr will store users in theÂ <code>user</code>Â table, and posts in theÂ <code>post</code>Â table. Create a file with the SQL commands needed to create empty tables:</p>
<p><code>flaskr/schema.sql</code></p>
<div class="highlight"><pre><span></span><code><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="k">user</span><span class="p">;</span>
<span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="n">post</span><span class="p">;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">AUTOINCREMENT</span><span class="p">,</span>
<span class="w">  </span><span class="n">username</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">password</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">post</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">AUTOINCREMENT</span><span class="p">,</span>
<span class="w">  </span><span class="n">author_id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">created</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
<span class="w">  </span><span class="n">title</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="n">body</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">author_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div>
<p>Add the Python functions that will run these SQL commands to theÂ <code>db.py</code>Â file:</p>
<p><code>flaskr/db.py</code></p>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">init_db</span><span class="p">():</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">current_app</span><span class="o">.</span><span class="n">open_resource</span><span class="p">(</span><span class="s1">&#39;schema.sql&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>

<span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s1">&#39;init-db&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">init_db_command</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear the existing data and create new tables.&quot;&quot;&quot;</span>
    <span class="n">init_db</span><span class="p">()</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Initialized the database.&#39;</span><span class="p">)</span>
</code></pre></div>
<a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.open_resource" title="flask.Flask.open_resource"><code>open_resource()</code></a>Â opens a file relative to theÂ <code>flaskr</code>Â package, which is useful since you wonâ€™t necessarily know where that location is when deploying the application later.Â <code>get_db</code>Â returns a database connection, which is used to execute the commands read from the file.</p>
<p><a href="https://click.palletsprojects.com/en/8.1.x/api/#click.command" title="(in Click v8.1.x)"><code>click.command()</code></a>Â defines a command line command calledÂ <code>init-db</code>Â that calls theÂ <code>init_db</code>Â function and shows a success message to the user. You can readÂ <a href="https://flask.palletsprojects.com/en/3.0.x/cli/">Command Line Interface</a>Â to learn more about writing commands.</p>
<h3 id="register-with-the-application">Register with the Application<a class="headerlink" href="#register-with-the-application" title="Permanent link">&para;</a></h3>
<p>TheÂ <code>close_db</code>Â andÂ <code>init_db_command</code>Â functions need to be registered with the application instance; otherwise, they wonâ€™t be used by the application. However, since youâ€™re using a factory function, that instance isnâ€™t available when writing the functions. Instead, write a function that takes an application and does the registration.</p>
<p><code>flaskr/db.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">teardown_appcontext</span><span class="p">(</span><span class="n">close_db</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">cli</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">init_db_command</span><span class="p">)</span>
</code></pre></div>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.teardown_appcontext" title="flask.Flask.teardown_appcontext"><code>app.teardown_appcontext()</code></a>Â tells Flask to call that function when cleaning up after returning the response.</p>
<p><a href="https://click.palletsprojects.com/en/8.1.x/api/#click.Group.add_command" title="(in Click v8.1.x)"><code>app.cli.add_command()</code></a>Â adds a new command that can be called with theÂ <code>flask</code>Â command.</p>
<p>Import and call this function from the factory. Place the new code at the end of the factory function before returning the app.</p>
<p><code>flaskr/__init__.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_app</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="o">...</span>
    <span class="c1"># existing code omitted</span>

    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">db</span>
    <span class="n">db</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">app</span>
</code></pre></div>
<h3 id="initialize-the-database-file">Initialize the Database File<a class="headerlink" href="#initialize-the-database-file" title="Permanent link">&para;</a></h3>
<p>Now thatÂ <code>init-db</code>Â has been registered with the app, it can be called using theÂ <code>flask</code>Â command, similar to theÂ <code>run</code>Â command from the previous page.</p>
<blockquote>
<p>Note</p>
<p>If youâ€™re still running the server from the previous page, you can either stop the server, or run this command in a new terminal. If you use a new terminal, remember to change to your project directory and activate the env as described inÂ <a href="https://flask.palletsprojects.com/en/3.0.x/installation/">Installation</a>.</p>
</blockquote>
<p>Run theÂ <code>init-db</code>Â command:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>flask<span class="w"> </span>--app<span class="w"> </span>flaskr<span class="w"> </span>init-db
Initialized<span class="w"> </span>the<span class="w"> </span>database.
</code></pre></div>
<p>There will now be aÂ <code>flaskr.sqlite</code>Â file in theÂ <code>instance</code>Â folder in your project.</p>
<h2 id="blueprints-and-views">Blueprints and Views<a class="headerlink" href="#blueprints-and-views" title="Permanent link">&para;</a></h2>
<p>A view function is the code you write to respond to requests to your application. Flask uses patterns to match the incoming request URL to the view that should handle it. The view returns data that Flask turns into an outgoing response. Flask can also go the other direction and generate a URL to a view based on its name and arguments.</p>
<h3 id="create-a-blueprint">Create a Blueprint<a class="headerlink" href="#create-a-blueprint" title="Permanent link">&para;</a></h3>
<p>AÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Blueprint" title="flask.Blueprint"><code>Blueprint</code></a>Â is a way to organize a group of related views and other code. Rather than registering views and other code directly with an application, they are registered with a blueprint. Then the blueprint is registered with the application when it is available in the factory function.</p>
<p>Flaskr will have two blueprints, one for authentication functions and one for the blog posts functions. The code for each blueprint will go in a separate module. Since the blog needs to know about authentication, youâ€™ll write the authentication one first.</p>
<p><code>flaskr/auth.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">functools</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Blueprint</span><span class="p">,</span> <span class="n">flash</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">url_for</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">werkzeug.security</span> <span class="kn">import</span> <span class="n">check_password_hash</span><span class="p">,</span> <span class="n">generate_password_hash</span>

<span class="kn">from</span> <span class="nn">flaskr.db</span> <span class="kn">import</span> <span class="n">get_db</span>

<span class="n">bp</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s1">&#39;auth&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">,</span> <span class="n">url_prefix</span><span class="o">=</span><span class="s1">&#39;/auth&#39;</span><span class="p">)</span>
</code></pre></div>
<p>This creates aÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Blueprint" title="flask.Blueprint"><code>Blueprint</code></a>Â namedÂ <code>'auth'</code>. Like the application object, the blueprint needs to know where itâ€™s defined, soÂ <code>__name__</code>Â is passed as the second argument. TheÂ <code>url_prefix</code>Â will be prepended to all the URLs associated with the blueprint.</p>
<p>Import and register the blueprint from the factory usingÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.register_blueprint" title="flask.Flask.register_blueprint"><code>app.register_blueprint()</code></a>. Place the new code at the end of the factory function before returning the app.</p>
<p><code>flaskr/__init__.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_app</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="o">...</span>
    <span class="c1"># existing code omitted</span>

    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">auth</span>
    <span class="n">app</span><span class="o">.</span><span class="n">register_blueprint</span><span class="p">(</span><span class="n">auth</span><span class="o">.</span><span class="n">bp</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">app</span>
</code></pre></div>
<p>The authentication blueprint will have views to register new users and to log in and log out.</p>
<h3 id="the-first-view-register">The First View: Register<a class="headerlink" href="#the-first-view-register" title="Permanent link">&para;</a></h3>
<p>When the user visits theÂ <code>/auth/register</code>Â URL, theÂ <code>register</code>Â view will returnÂ <a href="https://developer.mozilla.org/docs/Web/HTML">HTML</a>Â with a form for them to fill out. When they submit the form, it will validate their input and either show the form again with an error message or create the new user and go to the login page.</p>
<p>For now you will just write the view code. On the next page, youâ€™ll write templates to generate the HTML form.</p>
<p><code>flaskr/auth.py</code><a href="https://flask.palletsprojects.com/en/3.0.x/tutorial/views/#id3" title="Link to this code"></a></p>
<div class="highlight"><pre><span></span><code><span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/register&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
        <span class="n">error</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Username is required.&#39;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Password is required.&#39;</span>

        <span class="k">if</span> <span class="n">error</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="s2">&quot;INSERT INTO user (username, password) VALUES (?, ?)&quot;</span><span class="p">,</span>
                    <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">generate_password_hash</span><span class="p">(</span><span class="n">password</span><span class="p">)),</span>
                <span class="p">)</span>
                <span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">db</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
                <span class="n">error</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;User </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2"> is already registered.&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;auth.login&quot;</span><span class="p">))</span>

        <span class="n">flash</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;auth/register.html&#39;</span><span class="p">)</span>
</code></pre></div>
<p>Hereâ€™s what theÂ <code>register</code>Â view function is doing:</p>
<ol>
<li><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Blueprint.route" title="flask.Blueprint.route"><code>@bp.route</code></a>Â associates the URLÂ <code>/register</code>Â with theÂ <code>register</code>Â view function. When Flask receives a request toÂ <code>/auth/register</code>, it will call theÂ <code>register</code>Â view and use the return value as the response.</li>
<li>If the user submitted the form,Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Request.method" title="flask.Request.method"><code>request.method</code></a>Â will beÂ <code>'POST'</code>. In this case, start validating the input.</li>
<li><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Request.form" title="flask.Request.form"><code>request.form</code></a>Â is a special type ofÂ <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code>dict</code></a>Â mapping submitted form keys and values. The user will input theirÂ <code>username</code>Â andÂ <code>password</code>.</li>
<li>Validate thatÂ <code>username</code>Â andÂ <code>password</code>Â are not empty.</li>
<li>If validation succeeds, insert the new user data into the database.<ul>
<li><a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.execute" title="(in Python v3.12)"><code>db.execute</code></a>Â takes a SQL query withÂ <code>?</code>Â placeholders for any user input, and a tuple of values to replace the placeholders with. The database library will take care of escaping the values so you are not vulnerable to aÂ <em>SQL injection attack</em>.</li>
<li>For security, passwords should never be stored in the database directly. Instead,Â <a href="https://werkzeug.palletsprojects.com/en/3.0.x/utils/#werkzeug.security.generate_password_hash" title="(in Werkzeug v3.0.x)"><code>generate_password_hash()</code></a>Â is used to securely hash the password, and that hash is stored. Since this query modifies data,Â <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.commit" title="(in Python v3.12)"><code>db.commit()</code></a>Â needs to be called afterwards to save the changes.</li>
<li>AnÂ <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.IntegrityError" title="(in Python v3.12)"><code>sqlite3.IntegrityError</code></a>Â will occur if the username already exists, which should be shown to the user as another validation error.</li>
</ul>
</li>
<li>After storing the user, they are redirected to the login page.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.url_for" title="flask.url_for"><code>url_for()</code></a>Â generates the URL for the login view based on its name. This is preferable to writing the URL directly as it allows you to change the URL later without changing all code that links to it.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.redirect" title="flask.redirect"><code>redirect()</code></a>Â generates a redirect response to the generated URL.</li>
<li>If validation fails, the error is shown to the user.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.flash" title="flask.flash"><code>flash()</code></a>Â stores messages that can be retrieved when rendering the template.</li>
<li>When the user initially navigates toÂ <code>auth/register</code>, or there was a validation error, an HTML page with the registration form should be shown.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.render_template" title="flask.render_template"><code>render_template()</code></a>Â will render a template containing the HTML, which youâ€™ll write in the next step of the tutorial.</li>
</ol>
<h3 id="login">Login<a class="headerlink" href="#login" title="Permanent link">&para;</a></h3>
<p>This view follows the same pattern as theÂ <code>register</code>Â view above.</p>
<p><code>flaskr/auth.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
        <span class="n">error</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s1">&#39;SELECT * FROM user WHERE username = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">username</span><span class="p">,)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Incorrect username.&#39;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">check_password_hash</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span> <span class="n">password</span><span class="p">):</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Incorrect password.&#39;</span>

        <span class="k">if</span> <span class="n">error</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">session</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">session</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

        <span class="n">flash</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;auth/login.html&#39;</span><span class="p">)</span>
</code></pre></div>
<p>There are a few differences from theÂ <code>register</code>Â view:</p>
<ol>
<li>The user is queried first and stored in a variable for later use.
    <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.fetchone" title="(in Python v3.12)"><code>fetchone()</code></a>Â returns one row from the query. If the query returned no results, it returnsÂ <code>None</code>. Later,Â <a href="https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.fetchall" title="(in Python v3.12)"><code>fetchall()</code></a>Â will be used, which returns a list of all results.</li>
<li><a href="https://werkzeug.palletsprojects.com/en/3.0.x/utils/#werkzeug.security.check_password_hash" title="(in Werkzeug v3.0.x)"><code>check_password_hash()</code></a>Â hashes the submitted password in the same way as the stored hash and securely compares them. If they match, the password is valid.</li>
<li><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.session" title="flask.session"><code>session</code></a>Â is aÂ <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code>dict</code></a>Â that stores data across requests. When validation succeeds, the userâ€™sÂ <code>id</code>Â is stored in a new session. The data is stored in aÂ <em>cookie</em>Â that is sent to the browser, and the browser then sends it back with subsequent requests. Flask securelyÂ <em>signs</em>Â the data so that it canâ€™t be tampered with.</li>
</ol>
<p>Now that the userâ€™sÂ <code>id</code>Â is stored in theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.session" title="flask.session"><code>session</code></a>, it will be available on subsequent requests. At the beginning of each request, if a user is logged in their information should be loaded and made available to other views.</p>
<p><code>flaskr/auth.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@bp</span><span class="o">.</span><span class="n">before_app_request</span>
<span class="k">def</span> <span class="nf">load_logged_in_user</span><span class="p">():</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">g</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">g</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s1">&#39;SELECT * FROM user WHERE id = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">user_id</span><span class="p">,)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
</code></pre></div>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Blueprint.before_app_request" title="flask.Blueprint.before_app_request"><code>bp.before_app_request()</code></a>Â registers a function that runs before the view function, no matter what URL is requested.Â <code>load_logged_in_user</code>Â checks if a user id is stored in theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.session" title="flask.session"><code>session</code></a>Â and gets that userâ€™s data from the database, storing it onÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.g" title="flask.g"><code>g.user</code></a>, which lasts for the length of the request. If there is no user id, or if the id doesnâ€™t exist,Â <code>g.user</code>Â will beÂ <code>None</code>.</p>
<h3 id="logout">Logout<a class="headerlink" href="#logout" title="Permanent link">&para;</a></h3>
<p>To log out, you need to remove the user id from theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.session" title="flask.session"><code>session</code></a>. ThenÂ <code>load_logged_in_user</code>Â wonâ€™t load a user on subsequent requests.</p>
<p><code>flaskr/auth.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/logout&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">logout</span><span class="p">():</span>
    <span class="n">session</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>
</code></pre></div>
<h3 id="require-authentication-in-other-views">Require Authentication in Other Views<a class="headerlink" href="#require-authentication-in-other-views" title="Permanent link">&para;</a></h3>
<p>Creating, editing, and deleting blog posts will require a user to be logged in. AÂ <em>decorator</em>Â can be used to check this for each view itâ€™s applied to.</p>
<p><code>flaskr/auth.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">login_required</span><span class="p">(</span><span class="n">view</span><span class="p">):</span>
    <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">wrapped_view</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;auth.login&#39;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">view</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">wrapped_view</span>
</code></pre></div>
<p>This decorator returns a new view function that wraps the original view itâ€™s applied to. The new function checks if a user is loaded and redirects to the login page otherwise. If a user is loaded the original view is called and continues normally. Youâ€™ll use this decorator when writing the blog views.</p>
<h3 id="endpoints-and-urls">Endpoints and URLs<a class="headerlink" href="#endpoints-and-urls" title="Permanent link">&para;</a></h3>
<p>TheÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.url_for" title="flask.url_for"><code>url_for()</code></a>Â function generates the URL to a view based on a name and arguments. The name associated with a view is also called theÂ <em>endpoint</em>, and by default itâ€™s the same as the name of the view function.</p>
<p>For example, theÂ <code>hello()</code>Â view that was added to the app factory earlier in the tutorial has the nameÂ <code>'hello'</code>Â and can be linked to withÂ <code>url_for('hello')</code>. If it took an argument, which youâ€™ll see later, it would be linked to usingÂ <code>url_for('hello',Â who='World')</code>.</p>
<p>When using a blueprint, the name of the blueprint is prepended to the name of the function, so the endpoint for theÂ <code>login</code>Â function you wrote above isÂ <code>'auth.login'</code>Â because you added it to theÂ <code>'auth'</code>Â blueprint.</p>
<h2 id="template">Template<a class="headerlink" href="#template" title="Permanent link">&para;</a></h2>
<p>Youâ€™ve written the authentication views for your application, but if youâ€™re running the server and try to go to any of the URLs, youâ€™ll see aÂ <code>TemplateNotFound</code>Â error. Thatâ€™s because the views are callingÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.render_template" title="flask.render_template"><code>render_template()</code></a>, but you havenâ€™t written the templates yet. The template files will be stored in theÂ <code>templates</code>Â directory inside theÂ <code>flaskr</code>Â package.</p>
<p>Templates are files that contain static data as well as placeholders for dynamic data. A template is rendered with specific data to produce a final document. Flask uses theÂ <a href="https://jinja.palletsprojects.com/templates/">Jinja</a>Â template library to render templates.</p>
<p>In your application, you will use templates to renderÂ <a href="https://developer.mozilla.org/docs/Web/HTML">HTML</a>Â which will display in the userâ€™s browser. In Flask, Jinja is configured toÂ <em>autoescape</em>Â any data that is rendered in HTML templates. This means that itâ€™s safe to render user input; any characters theyâ€™ve entered that could mess with the HTML, such asÂ <code>&lt;</code>Â andÂ <code>&gt;</code>Â will beÂ <em>escaped</em>Â withÂ <em>safe</em>Â values that look the same in the browser but donâ€™t cause unwanted effects.</p>
<p>Jinja looks and behaves mostly like Python. Special delimiters are used to distinguish Jinja syntax from the static data in the template. Anything betweenÂ <code>{{</code>Â andÂ <code>}}</code>Â is an expression that will be output to the final document.Â <code>{%</code>Â andÂ <code>%}</code>Â denotes a control flow statement likeÂ <code>if</code>Â andÂ <code>for</code>. Unlike Python, blocks are denoted by start and end tags rather than indentation since static text within a block could change indentation.</p>
<h3 id="the-base-layout">The Base Layout<a class="headerlink" href="#the-base-layout" title="Permanent link">&para;</a></h3>
<p>Each page in the application will have the same basic layout around a different body. Instead of writing the entire HTML structure in each template, each template willÂ <em>extend</em>Â a base template and override specific sections.</p>
<p><code>flaskr/templates/base.html</code></p>
<div class="highlight"><pre><span></span><code>&lt;!doctype html&gt;
&lt;title&gt;{% block title %}{% endblock %} - Flaskr&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ url_for(&#39;static&#39;, filename=&#39;style.css&#39;) }}&quot;&gt;
&lt;nav&gt;
  &lt;h1&gt;Flaskr&lt;/h1&gt;
  &lt;ul&gt;
    {% if g.user %}
      &lt;li&gt;&lt;span&gt;{{ g.user[&#39;username&#39;] }}&lt;/span&gt;
      &lt;li&gt;&lt;a href=&quot;{{ url_for(&#39;auth.logout&#39;) }}&quot;&gt;Log Out&lt;/a&gt;
    {% else %}
      &lt;li&gt;&lt;a href=&quot;{{ url_for(&#39;auth.register&#39;) }}&quot;&gt;Register&lt;/a&gt;
      &lt;li&gt;&lt;a href=&quot;{{ url_for(&#39;auth.login&#39;) }}&quot;&gt;Log In&lt;/a&gt;
    {% endif %}
  &lt;/ul&gt;
&lt;/nav&gt;
&lt;section class=&quot;content&quot;&gt;
  &lt;header&gt;
    {% block header %}{% endblock %}
  &lt;/header&gt;
  {% for message in get_flashed_messages() %}
    &lt;div class=&quot;flash&quot;&gt;{{ message }}&lt;/div&gt;
  {% endfor %}
  {% block content %}{% endblock %}
&lt;/section&gt;
</code></pre></div>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.g" title="flask.g"><code>g</code></a>Â is automatically available in templates. Based on ifÂ <code>g.user</code>Â is set (fromÂ <code>load_logged_in_user</code>), either the username and a log out link are displayed, or links to register and log in are displayed.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.url_for" title="flask.url_for"><code>url_for()</code></a>Â is also automatically available, and is used to generate URLs to views instead of writing them out manually.</p>
<p>After the page title, and before the content, the template loops over each message returned byÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.get_flashed_messages" title="flask.get_flashed_messages"><code>get_flashed_messages()</code></a>. You usedÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.flash" title="flask.flash"><code>flash()</code></a>Â in the views to show error messages, and this is the code that will display them.</p>
<p>There are three blocks defined here that will be overridden in the other templates:</p>
<ol>
<li><code>{%Â blockÂ titleÂ %}</code>Â will change the title displayed in the browserâ€™s tab and window title.</li>
<li><code>{%Â blockÂ headerÂ %}</code>Â is similar toÂ <code>title</code>Â but will change the title displayed on the page.</li>
<li><code>{%Â blockÂ contentÂ %}</code>Â is where the content of each page goes, such as the login form or a blog post.</li>
</ol>
<p>The base template is directly in theÂ <code>templates</code>Â directory. To keep the others organized, the templates for a blueprint will be placed in a directory with the same name as the blueprint.</p>
<h3 id="register">Register<a class="headerlink" href="#register" title="Permanent link">&para;</a></h3>
<p><code>flaskr/templates/auth/register.html</code></p>
<div class="highlight"><pre><span></span><code>{% extends &#39;base.html&#39; %}

{% block header %}
  &lt;h1&gt;{% block title %}Register{% endblock %}&lt;/h1&gt;
{% endblock %}

{% block content %}
  &lt;form method=&quot;post&quot;&gt;
    &lt;label for=&quot;username&quot;&gt;Username&lt;/label&gt;
    &lt;input name=&quot;username&quot; id=&quot;username&quot; required&gt;
    &lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt;
    &lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; required&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Register&quot;&gt;
  &lt;/form&gt;
{% endblock %}
</code></pre></div>
<p><code>{%Â extendsÂ 'base.html'Â %}</code>Â tells Jinja that this template should replace the blocks from the base template. All the rendered content must appear insideÂ <code>{%Â blockÂ %}</code>Â tags that override blocks from the base template.</p>
<p>A useful pattern used here is to placeÂ <code>{%Â blockÂ titleÂ %}</code>Â insideÂ <code>{%Â blockÂ headerÂ %}</code>. This will set the title block and then output the value of it into the header block, so that both the window and page share the same title without writing it twice.</p>
<p>TheÂ <code>input</code>Â tags are using theÂ <code>required</code>Â attribute here. This tells the browser not to submit the form until those fields are filled in. If the user is using an older browser that doesnâ€™t support that attribute, or if they are using something besides a browser to make requests, you still want to validate the data in the Flask view. Itâ€™s important to always fully validate the data on the server, even if the client does some validation as well.</p>
<h3 id="log-in">Log In<a class="headerlink" href="#log-in" title="Permanent link">&para;</a></h3>
<p>This is identical to the register template except for the title and submit button.</p>
<p><code>flaskr/templates/auth/login.html</code></p>
<div class="highlight"><pre><span></span><code>{% extends &#39;base.html&#39; %}

{% block header %}
  &lt;h1&gt;{% block title %}Log In{% endblock %}&lt;/h1&gt;
{% endblock %}

{% block content %}
  &lt;form method=&quot;post&quot;&gt;
    &lt;label for=&quot;username&quot;&gt;Username&lt;/label&gt;
    &lt;input name=&quot;username&quot; id=&quot;username&quot; required&gt;
    &lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt;
    &lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; required&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Log In&quot;&gt;
  &lt;/form&gt;
{% endblock %}
</code></pre></div>
<h3 id="register-a-user">Register A User<a class="headerlink" href="#register-a-user" title="Permanent link">&para;</a></h3>
<p>Now that the authentication templates are written, you can register a user. Make sure the server is still running (<code>flaskÂ run</code>Â if itâ€™s not), then go toÂ <a href="http://127.0.0.1:5000/auth/register">http://127.0.0.1:5000/auth/register</a>.</p>
<p>Try clicking the â€œRegisterâ€ button without filling out the form and see that the browser shows an error message. Try removing theÂ <code>required</code>Â attributes from theÂ <code>register.html</code>Â template and click â€œRegisterâ€ again. Instead of the browser showing an error, the page will reload and the error fromÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.flash" title="flask.flash"><code>flash()</code></a>Â in the view will be shown.</p>
<p>Fill out a username and password and youâ€™ll be redirected to the login page. Try entering an incorrect username, or the correct username and incorrect password. If you log in youâ€™ll get an error because thereâ€™s noÂ <code>index</code>Â view to redirect to yet.</p>
<h2 id="static-files">Static Files<a class="headerlink" href="#static-files" title="Permanent link">&para;</a></h2>
<p>The authentication views and templates work, but they look very plain right now. SomeÂ <a href="https://developer.mozilla.org/docs/Web/CSS">CSS</a>Â can be added to add style to the HTML layout you constructed. The style wonâ€™t change, so itâ€™s aÂ <em>static</em>Â file rather than a template.</p>
<p>Flask automatically adds aÂ <code>static</code>Â view that takes a path relative to theÂ <code>flaskr/static</code>Â directory and serves it. TheÂ <code>base.html</code>Â template already has a link to theÂ <code>style.css</code>Â file:</p>
<div class="highlight"><pre><span></span><code>{{ url_for(&#39;static&#39;, filename=&#39;style.css&#39;) }}
</code></pre></div>
<p>Besides CSS, other types of static files might be files with JavaScript functions, or a logo image. They are all placed under theÂ <code>flaskr/static</code>Â directory and referenced withÂ <code>url_for('static',Â filename='...')</code>.</p>
<p>This tutorial isnâ€™t focused on how to write CSS, so you can just copy the following into theÂ <code>flaskr/static/style.css</code>Â file:</p>
<p><code>flaskr/static/style.css</code></p>
<div class="highlight"><pre><span></span><code><span class="nt">html</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="kc">sans-serif</span><span class="p">;</span><span class="w"> </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#eee</span><span class="p">;</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">body</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">960</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"> </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">h1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="kc">serif</span><span class="p">;</span><span class="w"> </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#377ba8</span><span class="p">;</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">a</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#377ba8</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">hr</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span><span class="w"> </span><span class="k">border-top</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">lightgray</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">nav</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">lightgray</span><span class="p">;</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"> </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">nav</span><span class="w"> </span><span class="nt">h1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">flex</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">nav</span><span class="w"> </span><span class="nt">h1</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">nav</span><span class="w"> </span><span class="nt">ul</span><span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"> </span><span class="k">list-style</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">nav</span><span class="w"> </span><span class="nt">ul</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="nt">a</span><span class="o">,</span><span class="w"> </span><span class="nt">nav</span><span class="w"> </span><span class="nt">ul</span><span class="w"> </span><span class="nt">li</span><span class="w"> </span><span class="nt">span</span><span class="o">,</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="p">.</span><span class="nc">action</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">rem</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">border-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">lightgray</span><span class="p">;</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"> </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-end</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="nt">h1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">flex</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">rem</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mf">0.25</span><span class="kt">rem</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">flash</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">em</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">em</span><span class="p">;</span><span class="w"> </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="mh">#cae6f6</span><span class="p">;</span><span class="w"> </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#377ba8</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">post</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"> </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-end</span><span class="p">;</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">0.85</span><span class="kt">em</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">post</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">div</span><span class="p">:</span><span class="nd">first-of-type</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">flex</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">post</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">header</span><span class="w"> </span><span class="nt">h1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">em</span><span class="p">;</span><span class="w"> </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">post</span><span class="w"> </span><span class="p">.</span><span class="nc">about</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">slategray</span><span class="p">;</span><span class="w"> </span><span class="k">font-style</span><span class="p">:</span><span class="w"> </span><span class="kc">italic</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">post</span><span class="w"> </span><span class="p">.</span><span class="nc">body</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">white-space</span><span class="p">:</span><span class="w"> </span><span class="kc">pre-line</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">content</span><span class="p">:</span><span class="nd">last-child</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="nt">form</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">em</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"> </span><span class="k">flex-direction</span><span class="p">:</span><span class="w"> </span><span class="kc">column</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="nt">label</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="kc">bold</span><span class="p">;</span><span class="w"> </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="kt">em</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="nt">input</span><span class="o">,</span><span class="w"> </span><span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="nt">textarea</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">em</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">.</span><span class="nc">content</span><span class="w"> </span><span class="nt">textarea</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">min-height</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="kt">em</span><span class="p">;</span><span class="w"> </span><span class="k">resize</span><span class="p">:</span><span class="w"> </span><span class="kc">vertical</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">input</span><span class="p">.</span><span class="nc">danger</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#cc2f2e</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">submit</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">align-self</span><span class="p">:</span><span class="w"> </span><span class="kc">start</span><span class="p">;</span><span class="w"> </span><span class="k">min-width</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">em</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>You can find a less compact version ofÂ <code>style.css</code>Â in theÂ <a href="https://github.com/pallets/flask/tree/3.0.3/examples/tutorial/flaskr/static/style.css">example code</a>.</p>
<p>Go toÂ <a href="http://127.0.0.1:5000/auth/login">http://127.0.0.1:5000/auth/login</a>Â and the page should look like the screenshot below.</p>
<p><img alt="screenshot of login page" src="https://flask.palletsprojects.com/en/3.0.x/_images/flaskr_login.png" /></p>
<p>You can read more about CSS fromÂ <a href="https://developer.mozilla.org/docs/Web/CSS">Mozillaâ€™s documentation</a>. If you change a static file, refresh the browser page. If the change doesnâ€™t show up, try clearing your browserâ€™s cache.</p>
<h2 id="blog-blueprint">Blog Blueprint<a class="headerlink" href="#blog-blueprint" title="Permanent link">&para;</a></h2>
<p>Youâ€™ll use the same techniques you learned about when writing the authentication blueprint to write the blog blueprint. The blog should list all posts, allow logged in users to create posts, and allow the author of a post to edit or delete it.</p>
<p>As you implement each view, keep the development server running. As you save your changes, try going to the URL in your browser and testing them out.</p>
<h3 id="the-blueprint">The Blueprint<a class="headerlink" href="#the-blueprint" title="Permanent link">&para;</a></h3>
<p>Define the blueprint and register it in the application factory.</p>
<p><code>flaskr/blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Blueprint</span><span class="p">,</span> <span class="n">flash</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">url_for</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">werkzeug.exceptions</span> <span class="kn">import</span> <span class="n">abort</span>

<span class="kn">from</span> <span class="nn">flaskr.auth</span> <span class="kn">import</span> <span class="n">login_required</span>
<span class="kn">from</span> <span class="nn">flaskr.db</span> <span class="kn">import</span> <span class="n">get_db</span>

<span class="n">bp</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="s1">&#39;blog&#39;</span><span class="p">,</span> <span class="vm">__name__</span><span class="p">)</span>
</code></pre></div>
<p>Import and register the blueprint from the factory usingÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.register_blueprint" title="flask.Flask.register_blueprint"><code>app.register_blueprint()</code></a>. Place the new code at the end of the factory function before returning the app.</p>
<p><code>flaskr/__init__.py</code></p>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_app</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="o">...</span>
    <span class="c1"># existing code omitted</span>

    <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">blog</span>
    <span class="n">app</span><span class="o">.</span><span class="n">register_blueprint</span><span class="p">(</span><span class="n">blog</span><span class="o">.</span><span class="n">bp</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_url_rule</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">app</span>
</code></pre></div>
Unlike the auth blueprint, the blog blueprint does not have aÂ <code>url_prefix</code>. So theÂ <code>index</code>Â view will be atÂ <code>/</code>, theÂ <code>create</code>Â view atÂ <code>/create</code>, and so on. The blog is the main feature of Flaskr, so it makes sense that the blog index will be the main index.</p>
<p>However, the endpoint for theÂ <code>index</code>Â view defined below will beÂ <code>blog.index</code>. Some of the authentication views referred to a plainÂ <code>index</code>Â endpoint.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code>app.add_url_rule()</code></a>Â associates the endpoint nameÂ <code>'index'</code>Â with theÂ <code>/</code>Â url so thatÂ <code>url_for('index')</code>Â orÂ <code>url_for('blog.index')</code>Â will both work, generating the sameÂ <code>/</code>Â URL either way.</p>
<p>In another application you might give the blog blueprint aÂ <code>url_prefix</code>Â and define a separateÂ <code>index</code>Â view in the application factory, similar to theÂ <code>hello</code>Â view. Then theÂ <code>index</code>Â andÂ <code>blog.index</code>Â endpoints and URLs would be different.</p>
<h3 id="index">Index<a class="headerlink" href="#index" title="Permanent link">&para;</a></h3>
<p>The index will show all of the posts, most recent first. AÂ <code>JOIN</code>Â is used so that the author information from theÂ <code>user</code>Â table is available in the result.</p>
<p><code>flaskr/blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
    <span class="n">posts</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s1">&#39;SELECT p.id, title, body, created, author_id, username&#39;</span>
        <span class="s1">&#39; FROM post p JOIN user u ON p.author_id = u.id&#39;</span>
        <span class="s1">&#39; ORDER BY created DESC&#39;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;blog/index.html&#39;</span><span class="p">,</span> <span class="n">posts</span><span class="o">=</span><span class="n">posts</span><span class="p">)</span>
</code></pre></div>
<p><code>flaskr/templates/blog/index.html</code></p>
<div class="highlight"><pre><span></span><code>{% extends &#39;base.html&#39; %}

{% block header %}
  &lt;h1&gt;{% block title %}Posts{% endblock %}&lt;/h1&gt;
  {% if g.user %}
    &lt;a class=&quot;action&quot; href=&quot;{{ url_for(&#39;blog.create&#39;) }}&quot;&gt;New&lt;/a&gt;
  {% endif %}
{% endblock %}

{% block content %}
  {% for post in posts %}
    &lt;article class=&quot;post&quot;&gt;
      &lt;header&gt;
        &lt;div&gt;
          &lt;h1&gt;{{ post[&#39;title&#39;] }}&lt;/h1&gt;
          &lt;div class=&quot;about&quot;&gt;by {{ post[&#39;username&#39;] }} on {{ post[&#39;created&#39;].strftime(&#39;%Y-%m-%d&#39;) }}&lt;/div&gt;
        &lt;/div&gt;
        {% if g.user[&#39;id&#39;] == post[&#39;author_id&#39;] %}
          &lt;a class=&quot;action&quot; href=&quot;{{ url_for(&#39;blog.update&#39;, id=post[&#39;id&#39;]) }}&quot;&gt;Edit&lt;/a&gt;
        {% endif %}
      &lt;/header&gt;
      &lt;p class=&quot;body&quot;&gt;{{ post[&#39;body&#39;] }}&lt;/p&gt;
    &lt;/article&gt;
    {% if not loop.last %}
      &lt;hr&gt;
    {% endif %}
  {% endfor %}
{% endblock %}
</code></pre></div>
<p>When a user is logged in, theÂ <code>header</code>Â block adds a link to theÂ <code>create</code>Â view. When the user is the author of a post, theyâ€™ll see an â€œEditâ€ link to theÂ <code>update</code>Â view for that post.Â <code>loop.last</code>Â is a special variable available insideÂ <a href="https://jinja.palletsprojects.com/templates/#for">Jinja for loops</a>. Itâ€™s used to display a line after each post except the last one, to visually separate them.</p>
<h3 id="create">Create<a class="headerlink" href="#create" title="Permanent link">&para;</a></h3>
<p>TheÂ <code>create</code>Â view works the same as the authÂ <code>register</code>Â view. Either the form is displayed, or the posted data is validated and the post is added to the database or an error is shown.</p>
<p>TheÂ <code>login_required</code>Â decorator you wrote earlier is used on the blog views. A user must be logged in to visit these views, otherwise they will be redirected to the login page.</p>
<p><code>flaskr/blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/create&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">))</span>
<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">create</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]</span>
        <span class="n">error</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Title is required.&#39;</span>

        <span class="k">if</span> <span class="n">error</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">flash</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
            <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s1">&#39;INSERT INTO post (title, body, author_id)&#39;</span>
                <span class="s1">&#39; VALUES (?, ?, ?)&#39;</span><span class="p">,</span>
                <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
            <span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;blog.index&#39;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;blog/create.html&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>flaskr/templates/blog/create.html</code></p>
<div class="highlight"><pre><span></span><code>{% extends &#39;base.html&#39; %}

{% block header %}
  &lt;h1&gt;{% block title %}New Post{% endblock %}&lt;/h1&gt;
{% endblock %}

{% block content %}
  &lt;form method=&quot;post&quot;&gt;
    &lt;label for=&quot;title&quot;&gt;Title&lt;/label&gt;
    &lt;input name=&quot;title&quot; id=&quot;title&quot; value=&quot;{{ request.form[&#39;title&#39;] }}&quot; required&gt;
    &lt;label for=&quot;body&quot;&gt;Body&lt;/label&gt;
    &lt;textarea name=&quot;body&quot; id=&quot;body&quot;&gt;{{ request.form[&#39;body&#39;] }}&lt;/textarea&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Save&quot;&gt;
  &lt;/form&gt;
{% endblock %}
</code></pre></div>
<h3 id="update">Update<a class="headerlink" href="#update" title="Permanent link">&para;</a></h3>
<p>Both theÂ <code>update</code>Â andÂ <code>delete</code>Â views will need to fetch aÂ <code>post</code>Â byÂ <code>id</code>Â and check if the author matches the logged in user. To avoid duplicating code, you can write a function to get theÂ <code>post</code>Â and call it from each view.</p>
<p><code>flaskr/blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_post</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">check_author</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s1">&#39;SELECT p.id, title, body, created, author_id, username&#39;</span>
        <span class="s1">&#39; FROM post p JOIN user u ON p.author_id = u.id&#39;</span>
        <span class="s1">&#39; WHERE p.id = ?&#39;</span><span class="p">,</span>
        <span class="p">(</span><span class="nb">id</span><span class="p">,)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">post</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Post id </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> doesn&#39;t exist.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">check_author</span> <span class="ow">and</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;author_id&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]:</span>
        <span class="n">abort</span><span class="p">(</span><span class="mi">403</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">post</span>
</code></pre></div>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.abort" title="flask.abort"><code>abort()</code></a>Â will raise a special exception that returns an HTTP status code. It takes an optional message to show with the error, otherwise a default message is used.Â <code>404</code>Â means â€œNot Foundâ€, andÂ <code>403</code>Â means â€œForbiddenâ€. (<code>401</code>Â means â€œUnauthorizedâ€, but you redirect to the login page instead of returning that status.)</p>
<p>TheÂ <code>check_author</code>Â argument is defined so that the function can be used to get aÂ <code>post</code>Â without checking the author. This would be useful if you wrote a view to show an individual post on a page, where the user doesnâ€™t matter because theyâ€™re not modifying the post.</p>
<p><code>flaskr/blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&lt;int:id&gt;/update&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">))</span>
<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">get_post</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]</span>
        <span class="n">error</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Title is required.&#39;</span>

        <span class="k">if</span> <span class="n">error</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">flash</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
            <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="s1">&#39;UPDATE post SET title = ?, body = ?&#39;</span>
                <span class="s1">&#39; WHERE id = ?&#39;</span><span class="p">,</span>
                <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;blog.index&#39;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;blog/update.html&#39;</span><span class="p">,</span> <span class="n">post</span><span class="o">=</span><span class="n">post</span><span class="p">)</span>
</code></pre></div>
<p>Unlike the views youâ€™ve written so far, theÂ <code>update</code>Â function takes an argument,Â <code>id</code>. That corresponds to theÂ <code>&lt;int:id&gt;</code>Â in the route. A real URL will look likeÂ <code>/1/update</code>. Flask will capture theÂ <code>1</code>, ensure itâ€™s anÂ <a href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code>int</code></a>, and pass it as theÂ <code>id</code>Â argument. If you donâ€™t specifyÂ <code>int:</code>Â and instead doÂ <code>&lt;id&gt;</code>, it will be a string. To generate a URL to the update page,Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.url_for" title="flask.url_for"><code>url_for()</code></a>Â needs to be passed theÂ <code>id</code>Â so it knows what to fill in:Â <code>url_for('blog.update',Â id=post['id'])</code>. This is also in theÂ <code>index.html</code>Â file above.</p>
<p>TheÂ <code>create</code>Â andÂ <code>update</code>Â views look very similar. The main difference is that theÂ <code>update</code>Â view uses aÂ <code>post</code>Â object and anÂ <code>UPDATE</code>Â query instead of anÂ <code>INSERT</code>. With some clever refactoring, you could use one view and template for both actions, but for the tutorial itâ€™s clearer to keep them separate.</p>
<p><code>flaskr/templates/blog/update.html</code></p>
<p><div class="highlight"><pre><span></span><code><span class="p">{</span><span class="o">%</span> <span class="n">extends</span> <span class="s1">&#39;base.html&#39;</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">header</span> <span class="o">%</span><span class="p">}</span>
  <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">title</span> <span class="o">%</span><span class="p">}</span><span class="n">Edit</span> <span class="s2">&quot;{{ post[&#39;title&#39;] }}&quot;</span><span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="n">block</span> <span class="n">content</span> <span class="o">%</span><span class="p">}</span>
  <span class="o">&lt;</span><span class="n">form</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="o">&gt;</span><span class="n">Title</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">input</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;title&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;title&quot;</span>
      <span class="n">value</span><span class="o">=</span><span class="s2">&quot;{{ request.form[&#39;title&#39;] or post[&#39;title&#39;] }}&quot;</span> <span class="n">required</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">label</span> <span class="k">for</span><span class="o">=</span><span class="s2">&quot;body&quot;</span><span class="o">&gt;</span><span class="n">Body</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">textarea</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;body&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;body&quot;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="n">textarea</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Save&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;{{ url_for(&#39;blog.delete&#39;, id=post[&#39;id&#39;]) }}&quot;</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;post&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nb">input</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;danger&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;submit&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Delete&quot;</span> <span class="n">onclick</span><span class="o">=</span><span class="s2">&quot;return confirm(&#39;Are you sure?&#39;);&quot;</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endblock</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
This template has two forms. The first posts the edited data to the current page (<code>/&lt;id&gt;/update</code>). The other form contains only a button and specifies anÂ <code>action</code>Â attribute that posts to the delete view instead. The button uses some JavaScript to show a confirmation dialog before submitting.</p>
<p>The patternÂ <code>{{Â request.form['title']Â orÂ post['title']Â }}</code>Â is used to choose what data appears in the form. When the form hasnâ€™t been submitted, the originalÂ <code>post</code>Â data appears, but if invalid form data was posted you want to display that so the user can fix the error, soÂ <code>request.form</code>Â is used instead.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.request" title="flask.request"><code>request</code></a>Â is another variable thatâ€™s automatically available in templates.</p>
<h3 id="delete">Delete<a class="headerlink" href="#delete" title="Permanent link">&para;</a></h3>
<p>The delete view doesnâ€™t have its own template, the delete button is part ofÂ <code>update.html</code>Â and posts to theÂ <code>/&lt;id&gt;/delete</code>Â URL. Since there is no template, it will only handle theÂ <code>POST</code>Â method and then redirect to theÂ <code>index</code>Â view.</p>
<p><code>flaskr/blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@bp</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&lt;int:id&gt;/delete&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">,))</span>
<span class="nd">@login_required</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
    <span class="n">get_post</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DELETE FROM post WHERE id = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,))</span>
    <span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;blog.index&#39;</span><span class="p">))</span>
</code></pre></div>
<p>Congratulations, youâ€™ve now finished writing your application! Take some time to try out everything in the browser. However, thereâ€™s still more to do before the project is complete.</p>
<h2 id="make-the-project-installable">Make the Project Installable<a class="headerlink" href="#make-the-project-installable" title="Permanent link">&para;</a></h2>
<p>Making your project installable means that you can build aÂ <em>wheel</em>Â file and install that in another environment, just like you installed Flask in your projectâ€™s environment. This makes deploying your project the same as installing any other library, so youâ€™re using all the standard Python tools to manage everything.</p>
<p>Installing also comes with other benefits that might not be obvious from the tutorial or as a new Python user, including:</p>
<ul>
<li>Currently, Python and Flask understand how to use theÂ <code>flaskr</code>Â package only because youâ€™re running from your projectâ€™s directory. Installing means you can import it no matter where you run from.</li>
<li>You can manage your projectâ€™s dependencies just like other packages do, soÂ <code>pipÂ installÂ yourproject.whl</code>Â installs them.</li>
<li>Test tools can isolate your test environment from your development environment.</li>
</ul>
<blockquote>
<p>Note</p>
<p>This is being introduced late in the tutorial, but in your future projects you should always start with this.</p>
</blockquote>
<h3 id="describe-the-project">Describe the Project<a class="headerlink" href="#describe-the-project" title="Permanent link">&para;</a></h3>
<p>TheÂ <code>pyproject.toml</code>Â file describes your project and how to build it.</p>
<p><code>pyproject.toml</code></p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">[</span><span class="nv">project</span><span class="p p-Indicator">]</span>
<span class="l l-Scalar l-Scalar-Plain">name = &quot;flaskr&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">version = &quot;1.0.0&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">description = &quot;The basic blog app built in the Flask tutorial.&quot;</span>
<span class="l l-Scalar l-Scalar-Plain">dependencies = [</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">&quot;flask&quot;,</span>
<span class="l l-Scalar l-Scalar-Plain">]</span>

<span class="l l-Scalar l-Scalar-Plain">[build-system]</span>
<span class="l l-Scalar l-Scalar-Plain">requires = [&quot;flit_core&lt;4&quot;]</span>
<span class="l l-Scalar l-Scalar-Plain">build-backend = &quot;flit_core.buildapi&quot;</span>
</code></pre></div>
<p>See the officialÂ <a href="https://packaging.python.org/tutorials/packaging-projects/">Packaging tutorial</a>Â for more explanation of the files and options used.</p>
<h3 id="install-the-project">Install the Project<a class="headerlink" href="#install-the-project" title="Permanent link">&para;</a></h3>
<p>UseÂ <code>pip</code>Â to install your project in the virtual environment.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</code></pre></div>
<p>This tells pip to findÂ <code>pyproject.toml</code>Â in the current directory and install the project inÂ <em>editable</em>Â orÂ <em>development</em>Â mode. Editable mode means that as you make changes to your local code, youâ€™ll only need to re-install if you change the metadata about the project, such as its dependencies.</p>
<p>You can observe that the project is now installed withÂ <code>pipÂ list</code>.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pip<span class="w"> </span>list

Package<span class="w">        </span>Version<span class="w">   </span>Location
--------------<span class="w"> </span>---------<span class="w"> </span>----------------------------------
click<span class="w">          </span><span class="m">6</span>.7
Flask<span class="w">          </span><span class="m">1</span>.0
flaskr<span class="w">         </span><span class="m">1</span>.0.0<span class="w">     </span>/home/user/Projects/flask-tutorial
itsdangerous<span class="w">   </span><span class="m">0</span>.24
Jinja2<span class="w">         </span><span class="m">2</span>.10
MarkupSafe<span class="w">     </span><span class="m">1</span>.0
pip<span class="w">            </span><span class="m">9</span>.0.3
Werkzeug<span class="w">       </span><span class="m">0</span>.14.1
</code></pre></div>
<p>Nothing changes from how youâ€™ve been running your project so far.Â <code>--app</code>Â is still set toÂ <code>flaskr</code>Â andÂ <code>flaskÂ run</code>Â still runs the application, but you can call it from anywhere, not just theÂ <code>flask-tutorial</code>Â directory.</p>
<h2 id="test-coverage">Test Coverage<a class="headerlink" href="#test-coverage" title="Permanent link">&para;</a></h2>
<p>Writing unit tests for your application lets you check that the code you wrote works the way you expect. Flask provides a test client that simulates requests to the application and returns the response data.</p>
<p>You should test as much of your code as possible. Code in functions only runs when the function is called, and code in branches, such asÂ <code>if</code>Â blocks, only runs when the condition is met. You want to make sure that each function is tested with data that covers each branch.</p>
<p>The closer you get to 100% coverage, the more comfortable you can be that making a change wonâ€™t unexpectedly change other behavior. However, 100% coverage doesnâ€™t guarantee that your application doesnâ€™t have bugs. In particular, it doesnâ€™t test how the user interacts with the application in the browser. Despite this, test coverage is an important tool to use during development.</p>
<blockquote>
<p>Note</p>
<p>This is being introduced late in the tutorial, but in your future projects you should test as you develop.</p>
</blockquote>
<p>Youâ€™ll useÂ <a href="https://pytest.readthedocs.io/">pytest</a>Â andÂ <a href="https://coverage.readthedocs.io/">coverage</a>Â to test and measure your code. Install them both:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pytest<span class="w"> </span>coverage
</code></pre></div>
<h3 id="setup-and-fixtures">Setup and Fixtures<a class="headerlink" href="#setup-and-fixtures" title="Permanent link">&para;</a></h3>
<p>The test code is located in theÂ <code>tests</code>Â directory. This directory isÂ <em>next to</em>Â theÂ <code>flaskr</code>Â package, not inside it. TheÂ <code>tests/conftest.py</code>Â file contains setup functions calledÂ <em>fixtures</em>Â that each test will use. Tests are in Python modules that start withÂ <code>test_</code>, and each test function in those modules also starts withÂ <code>test_</code>.</p>
<p>Each test will create a new temporary database file and populate some data that will be used in the tests. Write a SQL file to insert that data.</p>
<p><code>tests/data.sql</code></p>
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="w"> </span><span class="n">password</span><span class="p">)</span>
<span class="k">VALUES</span>
<span class="w">  </span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;pbkdf2:sha256:50000$TCI4GzcX$0de171a4f4dac32e3364c7ddc7c14f3e2fa61f2d17574483f7ffbb431b4acb2f&#39;</span><span class="p">),</span>
<span class="w">  </span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;pbkdf2:sha256:50000$kJPKsz6N$d2d4784f1b030a9761f5ccaeeaca413f27f2ecb76d6168407af962ddce849f79&#39;</span><span class="p">);</span>

<span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">post</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="n">author_id</span><span class="p">,</span><span class="w"> </span><span class="n">created</span><span class="p">)</span>
<span class="k">VALUES</span>
<span class="w">  </span><span class="p">(</span><span class="s1">&#39;test title&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">x</span><span class="s1">&#39;0a&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;body&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;2018-01-01 00:00:00&#39;</span><span class="p">);</span>
</code></pre></div>
<p>TheÂ <code>app</code>Â fixture will call the factory and passÂ <code>test_config</code>Â to configure the application and database for testing instead of using your local development configuration.</p>
<p><code>tests/conftest.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">tempfile</span>

<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">flaskr</span> <span class="kn">import</span> <span class="n">create_app</span>
<span class="kn">from</span> <span class="nn">flaskr.db</span> <span class="kn">import</span> <span class="n">get_db</span><span class="p">,</span> <span class="n">init_db</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s1">&#39;data.sql&#39;</span><span class="p">),</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">_data_sql</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">app</span><span class="p">():</span>
    <span class="n">db_fd</span><span class="p">,</span> <span class="n">db_path</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()</span>

    <span class="n">app</span> <span class="o">=</span> <span class="n">create_app</span><span class="p">({</span>
        <span class="s1">&#39;TESTING&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;DATABASE&#39;</span><span class="p">:</span> <span class="n">db_path</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">init_db</span><span class="p">()</span>
        <span class="n">get_db</span><span class="p">()</span><span class="o">.</span><span class="n">executescript</span><span class="p">(</span><span class="n">_data_sql</span><span class="p">)</span>

    <span class="k">yield</span> <span class="n">app</span>

    <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">db_fd</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">db_path</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">client</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">test_client</span><span class="p">()</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">runner</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">test_cli_runner</span><span class="p">()</span>
</code></pre></div>
<p><a href="https://docs.python.org/3/library/tempfile.html#tempfile.mkstemp" title="(in Python v3.12)"><code>tempfile.mkstemp()</code></a>Â creates and opens a temporary file, returning the file descriptor and the path to it. TheÂ <code>DATABASE</code>Â path is overridden so it points to this temporary path instead of the instance folder. After setting the path, the database tables are created and the test data is inserted. After the test is over, the temporary file is closed and removed.</p>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/config/#TESTING" title="TESTING"><code>TESTING</code></a>Â tells Flask that the app is in test mode. Flask changes some internal behavior so itâ€™s easier to test, and other extensions can also use the flag to make testing them easier.</p>
<p>TheÂ <code>client</code>Â fixture callsÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.test_client" title="flask.Flask.test_client"><code>app.test_client()</code></a>Â with the application object created by theÂ <code>app</code>Â fixture. Tests will use the client to make requests to the application without running the server.</p>
<p>TheÂ <code>runner</code>Â fixture is similar toÂ <code>client</code>.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Flask.test_cli_runner" title="flask.Flask.test_cli_runner"><code>app.test_cli_runner()</code></a>Â creates a runner that can call the Click commands registered with the application.</p>
<p>Pytest uses fixtures by matching their function names with the names of arguments in the test functions. For example, theÂ <code>test_hello</code>Â function youâ€™ll write next takes aÂ <code>client</code>Â argument. Pytest matches that with theÂ <code>client</code>Â fixture function, calls it, and passes the returned value to the test function.</p>
<h3 id="factory">Factory<a class="headerlink" href="#factory" title="Permanent link">&para;</a></h3>
<p>Thereâ€™s not much to test about the factory itself. Most of the code will be executed for each test already, so if something fails the other tests will notice.</p>
<p>The only behavior that can change is passing test config. If config is not passed, there should be some default configuration, otherwise the configuration should be overridden.</p>
<p><code>tests/test_factory.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">flaskr</span> <span class="kn">import</span> <span class="n">create_app</span>

<span class="k">def</span> <span class="nf">test_config</span><span class="p">():</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">create_app</span><span class="p">()</span><span class="o">.</span><span class="n">testing</span>
    <span class="k">assert</span> <span class="n">create_app</span><span class="p">({</span><span class="s1">&#39;TESTING&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span><span class="o">.</span><span class="n">testing</span>

<span class="k">def</span> <span class="nf">test_hello</span><span class="p">(</span><span class="n">client</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/hello&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;Hello, World!&#39;</span>
</code></pre></div>
<p>You added theÂ <code>hello</code>Â route as an example when writing the factory at the beginning of the tutorial. It returns â€œHello, World!â€, so the test checks that the response data matches.</p>
<h3 id="database">Database<a class="headerlink" href="#database" title="Permanent link">&para;</a></h3>
<p>Within an application context,Â <code>get_db</code>Â should return the same connection each time itâ€™s called. After the context, the connection should be closed.</p>
<p><code>tests/test_db.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">flaskr.db</span> <span class="kn">import</span> <span class="n">get_db</span>

<span class="k">def</span> <span class="nf">test_get_close_db</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">db</span> <span class="ow">is</span> <span class="n">get_db</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">sqlite3</span><span class="o">.</span><span class="n">ProgrammingError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT 1&#39;</span><span class="p">)</span>

    <span class="k">assert</span> <span class="s1">&#39;closed&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<p>TheÂ <code>init-db</code>Â command should call theÂ <code>init_db</code>Â function and output a message.</p>
<p><code>tests/test_db.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_init_db_command</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span> <span class="n">monkeypatch</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Recorder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="n">called</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">fake_init_db</span><span class="p">():</span>
        <span class="n">Recorder</span><span class="o">.</span><span class="n">called</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="s1">&#39;flaskr.db.init_db&#39;</span><span class="p">,</span> <span class="n">fake_init_db</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;init-db&#39;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="s1">&#39;Initialized&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span>
    <span class="k">assert</span> <span class="n">Recorder</span><span class="o">.</span><span class="n">called</span>
</code></pre></div>
<p>This test uses Pytestâ€™sÂ <code>monkeypatch</code>Â fixture to replace theÂ <code>init_db</code>Â function with one that records that itâ€™s been called. TheÂ <code>runner</code>Â fixture you wrote above is used to call theÂ <code>init-db</code>Â command by name.</p>
<h3 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">&para;</a></h3>
<p>For most of the views, a user needs to be logged in. The easiest way to do this in tests is to make aÂ <code>POST</code>Â request to theÂ <code>login</code>Â view with the client. Rather than writing that out every time, you can write a class with methods to do that, and use a fixture to pass it the client for each test.</p>
<p><code>tests/conftest.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">AuthActions</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>

    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="s1">&#39;/auth/login&#39;</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="n">password</span><span class="p">}</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/auth/logout&#39;</span><span class="p">)</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">auth</span><span class="p">(</span><span class="n">client</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">AuthActions</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
</code></pre></div>
<p>With theÂ <code>auth</code>Â fixture, you can callÂ <code>auth.login()</code>Â in a test to log in as theÂ <code>test</code>Â user, which was inserted as part of the test data in theÂ <code>app</code>Â fixture.</p>
<p>TheÂ <code>register</code>Â view should render successfully onÂ <code>GET</code>. OnÂ <code>POST</code>Â with valid form data, it should redirect to the login URL and the userâ€™s data should be in the database. Invalid data should display error messages.</p>
<p><code>tests/test_auth.py</code></p>
<p><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">g</span><span class="p">,</span> <span class="n">session</span>
<span class="kn">from</span> <span class="nn">flaskr.db</span> <span class="kn">import</span> <span class="n">get_db</span>

<span class="k">def</span> <span class="nf">test_register</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/auth/register&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="s1">&#39;/auth/register&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/auth/login&quot;</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">assert</span> <span class="n">get_db</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="s2">&quot;SELECT * FROM user WHERE username = &#39;a&#39;&quot;</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">((</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">),</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;Username is required.&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;Password is required.&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;already registered&#39;</span><span class="p">),</span>
<span class="p">))</span>
<span class="k">def</span> <span class="nf">test_register_validate_input</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="s1">&#39;/auth/register&#39;</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="n">password</span><span class="p">}</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<a href="https://werkzeug.palletsprojects.com/en/3.0.x/test/#werkzeug.test.Client.get" title="(in Werkzeug v3.0.x)"><code>client.get()</code></a>Â makes aÂ <code>GET</code>Â request and returns theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Response" title="flask.Response"><code>Response</code></a>Â object returned by Flask. Similarly,Â <a href="https://werkzeug.palletsprojects.com/en/3.0.x/test/#werkzeug.test.Client.post" title="(in Werkzeug v3.0.x)"><code>client.post()</code></a>Â makes aÂ <code>POST</code>Â request, converting theÂ <code>data</code>Â dict into form data.</p>
<p>To test that the page renders successfully, a simple request is made and checked for aÂ <code>200Â OK</code>Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Response.status_code" title="flask.Response.status_code"><code>status_code</code></a>. If rendering failed, Flask would return aÂ <code>500Â InternalÂ ServerÂ Error</code>Â code.</p>
<p><code>headers</code>Â will have aÂ <code>Location</code>Â header with the login URL when the register view redirects to the login view.</p>
<p><a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.Response.data" title="flask.Response.data"><code>data</code></a>Â contains the body of the response as bytes. If you expect a certain value to render on the page, check that itâ€™s inÂ <code>data</code>. Bytes must be compared to bytes. If you want to compare text, useÂ <a href="https://werkzeug.palletsprojects.com/en/3.0.x/wrappers/#werkzeug.wrappers.Response.get_data" title="(in Werkzeug v3.0.x)"><code>get_data(as_text=True)</code></a>Â instead.</p>
<p><code>pytest.mark.parametrize</code>Â tells Pytest to run the same test function with different arguments. You use it here to test different invalid input and error messages without writing the same code three times.</p>
<p>The tests for theÂ <code>login</code>Â view are very similar to those forÂ <code>register</code>. Rather than testing the data in the database,Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.session" title="flask.session"><code>session</code></a>Â should haveÂ <code>user_id</code>Â set after logging in.</p>
<p><code>tests/test_auth.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_login</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/auth/login&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span>

    <span class="k">with</span> <span class="n">client</span><span class="p">:</span>
        <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">session</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;test&#39;</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">((</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">),</span> <span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;Incorrect username.&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;Incorrect password.&#39;</span><span class="p">),</span>
<span class="p">))</span>
<span class="k">def</span> <span class="nf">test_login_validate_input</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<p>UsingÂ <code>client</code>Â in aÂ <code>with</code>Â block allows accessing context variables such asÂ <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.session" title="flask.session"><code>session</code></a>Â after the response is returned. Normally, accessingÂ <code>session</code>Â outside of a request would raise an error.</p>
<p>TestingÂ <code>logout</code>Â is the opposite ofÂ <code>login</code>.Â <a href="https://flask.palletsprojects.com/en/3.0.x/api/#flask.session" title="flask.session"><code>session</code></a>Â should not containÂ <code>user_id</code>Â after logging out.</p>
<p><code>tests/test_auth.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_logout</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">):</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

    <span class="k">with</span> <span class="n">client</span><span class="p">:</span>
        <span class="n">auth</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
        <span class="k">assert</span> <span class="s1">&#39;user_id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">session</span>
</code></pre></div>
<h3 id="blog">Blog<a class="headerlink" href="#blog" title="Permanent link">&para;</a></h3>
<p>All the blog views use theÂ <code>auth</code>Â fixture you wrote earlier. CallÂ <code>auth.login()</code>Â and subsequent requests from the client will be logged in as theÂ <code>test</code>Â user.</p>
<p>TheÂ <code>index</code>Â view should display information about the post that was added with the test data. When logged in as the author, there should be a link to edit the post.</p>
<p>You can also test some more authentication behavior while testing theÂ <code>index</code>Â view. When not logged in, each page shows links to log in or register. When logged in, thereâ€™s a link to log out.</p>
<p><code>tests/test_blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">flaskr.db</span> <span class="kn">import</span> <span class="n">get_db</span>

<span class="k">def</span> <span class="nf">test_index</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s2">&quot;Log In&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s2">&quot;Register&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>

    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;Log Out&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;test title&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;by test on 2018-01-01&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;test</span><span class="se">\n</span><span class="s1">body&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;href=&quot;/1/update&quot;&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<p>A user must be logged in to access theÂ <code>create</code>,Â <code>update</code>, andÂ <code>delete</code>Â views. The logged in user must be the author of the post to accessÂ <code>update</code>Â andÂ <code>delete</code>, otherwise aÂ <code>403Â Forbidden</code>Â status is returned. If aÂ <code>post</code>Â with the givenÂ <code>id</code>Â doesnâ€™t exist,Â <code>update</code>Â andÂ <code>delete</code>Â should returnÂ <code>404Â NotÂ Found</code>.</p>
<p><code>tests/test_blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="p">(</span>
    <span class="s1">&#39;/create&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/1/update&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/1/delete&#39;</span><span class="p">,</span>
<span class="p">))</span>
<span class="k">def</span> <span class="nf">test_login_required</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/auth/login&quot;</span>

<span class="k">def</span> <span class="nf">test_author_required</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">):</span>
    <span class="c1"># change the post author to another user</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
        <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;UPDATE post SET author_id = 2 WHERE id = 1&#39;</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
    <span class="c1"># current user can&#39;t modify other user&#39;s post</span>
    <span class="k">assert</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/1/update&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span>
    <span class="k">assert</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/1/delete&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span>
    <span class="c1"># current user doesn&#39;t see edit link</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;href=&quot;/1/update&quot;&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="p">(</span>
    <span class="s1">&#39;/2/update&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/2/delete&#39;</span><span class="p">,</span>
<span class="p">))</span>
<span class="k">def</span> <span class="nf">test_exists_required</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span>
</code></pre></div>
<p>TheÂ <code>create</code>Â andÂ <code>update</code>Â views should render and return aÂ <code>200Â OK</code>Â status for aÂ <code>GET</code>Â request. When valid data is sent in aÂ <code>POST</code>Â request,Â <code>create</code>Â should insert the new post data into the database, andÂ <code>update</code>Â should modify the existing data. Both pages should show an error message on invalid data.</p>
<p><code>tests/test_blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_create</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/create&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
    <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/create&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;created&#39;</span><span class="p">,</span> <span class="s1">&#39;body&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">})</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT COUNT(id) FROM post&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">2</span>

<span class="k">def</span> <span class="nf">test_update</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/1/update&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>
    <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/1/update&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;updated&#39;</span><span class="p">,</span> <span class="s1">&#39;body&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">})</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
        <span class="n">post</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM post WHERE id = 1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;updated&#39;</span>

<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">parametrize</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="p">(</span>
    <span class="s1">&#39;/create&#39;</span><span class="p">,</span>
    <span class="s1">&#39;/1/update&#39;</span><span class="p">,</span>
<span class="p">))</span>
<span class="k">def</span> <span class="nf">test_create_update_validate</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;body&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">})</span>
    <span class="k">assert</span> <span class="sa">b</span><span class="s1">&#39;Title is required.&#39;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
<p>TheÂ <code>delete</code>Â view should redirect to the index URL and the post should no longer exist in the database.</p>
<p><code>tests/test_blog.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">test_delete</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">auth</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
    <span class="n">auth</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/1/delete&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">get_db</span><span class="p">()</span>
        <span class="n">post</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM post WHERE id = 1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">post</span> <span class="ow">is</span> <span class="kc">None</span>
</code></pre></div>
<h3 id="running-the-tests">Running the Tests<a class="headerlink" href="#running-the-tests" title="Permanent link">&para;</a></h3>
<p>Some extra configuration, which is not required but makes running tests with coverage less verbose, can be added to the projectâ€™sÂ <code>pyproject.toml</code>Â file.</p>
<p><code>pyproject.toml</code></p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">[</span><span class="nv">tool.pytest.ini_options</span><span class="p p-Indicator">]</span>
<span class="l l-Scalar l-Scalar-Plain">testpaths = [&quot;tests&quot;]</span>

<span class="l l-Scalar l-Scalar-Plain">[tool.coverage.run]</span>
<span class="l l-Scalar l-Scalar-Plain">branch = true</span>
<span class="l l-Scalar l-Scalar-Plain">source = [&quot;flaskr&quot;]</span>
</code></pre></div>
<p>To run the tests, use theÂ <code>pytest</code>Â command. It will find and run all the test functions youâ€™ve written.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span><span class="nv">pytest</span>

<span class="o">=========================</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>session<span class="w"> </span><span class="nv">starts</span><span class="w"> </span><span class="o">==========================</span>
platform<span class="w"> </span>linux<span class="w"> </span>--<span class="w"> </span>Python<span class="w"> </span><span class="m">3</span>.6.4,<span class="w"> </span>pytest-3.5.0,<span class="w"> </span>py-1.5.3,<span class="w"> </span>pluggy-0.6.0
rootdir:<span class="w"> </span>/home/user/Projects/flask-tutorial
collected<span class="w"> </span><span class="m">23</span><span class="w"> </span>items

tests/test_auth.py<span class="w"> </span>........<span class="w">                                      </span><span class="o">[</span><span class="w"> </span><span class="m">34</span>%<span class="o">]</span>
tests/test_blog.py<span class="w"> </span>............<span class="w">                                  </span><span class="o">[</span><span class="w"> </span><span class="m">86</span>%<span class="o">]</span>
tests/test_db.py<span class="w"> </span>..<span class="w">                                              </span><span class="o">[</span><span class="w"> </span><span class="m">95</span>%<span class="o">]</span>
tests/test_factory.py<span class="w"> </span>..<span class="w">                                         </span><span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">======================</span><span class="w"> </span><span class="m">24</span><span class="w"> </span>passed<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">0</span>.64<span class="w"> </span><span class="nv">seconds</span><span class="w"> </span><span class="o">=======================</span>
</code></pre></div>
<p>If any tests fail, pytest will show the error that was raised. You can runÂ <code>pytestÂ -v</code>Â to get a list of each test function rather than dots.</p>
<p>To measure the code coverage of your tests, use theÂ <code>coverage</code>Â command to run pytest instead of running it directly.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>coverage<span class="w"> </span>run<span class="w"> </span>-m<span class="w"> </span>pytest
</code></pre></div>
<p>You can either view a simple coverage report in the terminal:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>coverage<span class="w"> </span>report
</code></pre></div>
<div class="highlight"><pre><span></span><code>Name<span class="w">                 </span>Stmts<span class="w">   </span>Miss<span class="w"> </span>Branch<span class="w"> </span>BrPart<span class="w">  </span>Cover
------------------------------------------------------
flaskr/__init__.py<span class="w">      </span><span class="m">21</span><span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">2</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
flaskr/auth.py<span class="w">          </span><span class="m">54</span><span class="w">      </span><span class="m">0</span><span class="w">     </span><span class="m">22</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
flaskr/blog.py<span class="w">          </span><span class="m">54</span><span class="w">      </span><span class="m">0</span><span class="w">     </span><span class="m">16</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
flaskr/db.py<span class="w">            </span><span class="m">24</span><span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">4</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%
------------------------------------------------------
TOTAL<span class="w">                  </span><span class="m">153</span><span class="w">      </span><span class="m">0</span><span class="w">     </span><span class="m">44</span><span class="w">      </span><span class="m">0</span><span class="w">   </span><span class="m">100</span>%

An<span class="w"> </span>HTML<span class="w"> </span>report<span class="w"> </span>allows<span class="w"> </span>you<span class="w"> </span>to<span class="w"> </span>see<span class="w"> </span>which<span class="w"> </span>lines<span class="w"> </span>were<span class="w"> </span>covered<span class="w"> </span><span class="k">in</span><span class="w"> </span>each<span class="w"> </span>file:

$<span class="w"> </span>coverage<span class="w"> </span>html
</code></pre></div>
<p>This generates files in theÂ <code>htmlcov</code>Â directory. OpenÂ <code>htmlcov/index.html</code>Â in your browser to see the report.</p>
<h2 id="deploy-to-production">Deploy to Production<a class="headerlink" href="#deploy-to-production" title="Permanent link">&para;</a></h2>
<p>This part of the tutorial assumes you have a server that you want to deploy your application to. It gives an overview of how to create the distribution file and install it, but wonâ€™t go into specifics about what server or software to use. You can set up a new environment on your development computer to try out the instructions below, but probably shouldnâ€™t use it for hosting a real public application. SeeÂ <a href="https://flask.palletsprojects.com/en/3.0.x/deploying/">Deploying to Production</a>Â for a list of many different ways to host your application.</p>
<h3 id="build-and-install">Build and Install<a class="headerlink" href="#build-and-install" title="Permanent link">&para;</a></h3>
<p>When you want to deploy your application elsewhere, you build aÂ <em>wheel</em>Â (<code>.whl</code>) file. Install and use theÂ <code>build</code>Â tool to do this.</p>
<p><div class="highlight"><pre><span></span><code>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>build
$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>build<span class="w"> </span>--wheel
</code></pre></div>
You can find the file inÂ <code>dist/flaskr-1.0.0-py3-none-any.whl</code>. The file name is in the format of {project name}-{version}-{python tag} -{abi tag}-{platform tag}.</p>
<p>Copy this file to another machine,Â <a href="https://flask.palletsprojects.com/en/3.0.x/installation/#install-create-env">set up a new virtualenv</a>, then install the file withÂ <code>pip</code>.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>flaskr-1.0.0-py3-none-any.whl
</code></pre></div>
<p>Pip will install your project along with its dependencies.</p>
<p>Since this is a different machine, you need to runÂ <code>init-db</code>Â again to create the database in the instance folder.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>flask<span class="w"> </span>--app<span class="w"> </span>flaskr<span class="w"> </span>init-db
</code></pre></div>
<p>When Flask detects that itâ€™s installed (not in editable mode), it uses a different directory for the instance folder. You can find it atÂ <code>.venv/var/flaskr-instance</code>Â instead.</p>
<h3 id="configure-the-secret-key">Configure the Secret Key<a class="headerlink" href="#configure-the-secret-key" title="Permanent link">&para;</a></h3>
<p>In the beginning of the tutorial that you gave a default value forÂ <a href="https://flask.palletsprojects.com/en/3.0.x/config/#SECRET_KEY" title="SECRET_KEY"><code>SECRET_KEY</code></a>. This should be changed to some random bytes in production. Otherwise, attackers could use the publicÂ <code>'dev'</code>Â key to modify the session cookie, or anything else that uses the secret key.</p>
<p>You can use the following command to output a random secret key:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>python<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;import secrets; print(secrets.token_hex())&#39;</span>

<span class="s1">&#39;192b9bdd22ab9ed4d12e236c78afcb9a393ec15f71bbf5dc987d54727823bcbf&#39;</span>
</code></pre></div>
<p>Create theÂ <code>config.py</code>Â file in the instance folder, which the factory will read from if it exists. Copy the generated value into it.</p>
<p><code>.venv/var/flaskr-instance/config.py</code></p>
<div class="highlight"><pre><span></span><code><span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;192b9bdd22ab9ed4d12e236c78afcb9a393ec15f71bbf5dc987d54727823bcbf&#39;</span>
</code></pre></div>
<p>You can also set any other necessary configuration here, althoughÂ <code>SECRET_KEY</code>Â is the only one needed for Flaskr.</p>
<h3 id="run-with-a-production-server">Run with a Production Server<a class="headerlink" href="#run-with-a-production-server" title="Permanent link">&para;</a></h3>
<p>When running publicly rather than in development, you should not use the built-in development server (<code>flaskÂ run</code>). The development server is provided by Werkzeug for convenience, but is not designed to be particularly efficient, stable, or secure.</p>
<p>Instead, use a production WSGI server. For example, to useÂ <a href="https://docs.pylonsproject.org/projects/waitress/en/stable/">Waitress</a>, first install it in the virtual environment:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>waitress
</code></pre></div>
<p>You need to tell Waitress about your application, but it doesnâ€™t useÂ <code>--app</code>Â likeÂ <code>flaskÂ run</code>Â does. You need to tell it to import and call the application factory to get an application object.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>waitress-serve<span class="w"> </span>--call<span class="w"> </span><span class="s1">&#39;flaskr:create_app&#39;</span>
</code></pre></div>
<p>Serving on http://0.0.0.0:8080</p>
<p>SeeÂ <a href="https://flask.palletsprojects.com/en/3.0.x/deploying/">Deploying to Production</a>Â for a list of many different ways to host your application. Waitress is just an example, chosen for the tutorial because it supports both Windows and Linux. There are many more WSGI servers and deployment options that you may choose for your project.</p>
<h2 id="keep-developing">Keep Developing!<a class="headerlink" href="#keep-developing" title="Permanent link">&para;</a></h2>
<p>Youâ€™ve learned about quite a few Flask and Python concepts throughout the tutorial. Go back and review the tutorial and compare your code with the steps you took to get there. Compare your project to theÂ <a href="https://github.com/pallets/flask/tree/3.0.3/examples/tutorial">example project</a>, which might look a bit different due to the step-by-step nature of the tutorial.</p>
<p>Thereâ€™s a lot more to Flask than what youâ€™ve seen so far. Even so, youâ€™re now equipped to start developing your own web applications. Check out theÂ <a href="https://flask.palletsprojects.com/en/3.0.x/quickstart/">Quickstart</a>Â for an overview of what Flask can do, then dive into the docs to keep learning. Flask usesÂ <a href="https://palletsprojects.com/p/jinja/">Jinja</a>,Â <a href="https://palletsprojects.com/p/click/">Click</a>,Â <a href="https://palletsprojects.com/p/werkzeug/">Werkzeug</a>, andÂ <a href="https://palletsprojects.com/p/itsdangerous/">ItsDangerous</a>Â behind the scenes, and they all have their own documentation too. Youâ€™ll also be interested inÂ <a href="https://flask.palletsprojects.com/en/3.0.x/extensions/">Extensions</a>Â which make tasks like working with the database or validating form data easier and more powerful.</p>
<p>If you want to keep developing your Flaskr project, here are some ideas for what to try next:</p>
<ul>
<li>A detail view to show a single post. Click a postâ€™s title to go to its page.</li>
<li>Like / unlike a post.</li>
<li>Comments.</li>
<li>Tags. Clicking a tag shows all the posts with that tag.</li>
<li>A search box that filters the index page by name.</li>
<li>Paged display. Only show 5 posts per page.</li>
<li>Upload an image to go along with a post.</li>
<li>Format posts using Markdown.</li>
<li>An RSS feed of new posts.</li>
</ul>
<p>Have fun and make awesome applications!</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/yahyaqr/" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/yahya-aqrom/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/yahyaqr/oracle" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.instant", "navigation.instant.prefetch", "navigation.top", "navigation.path", "toc.follow"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>